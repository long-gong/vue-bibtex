'use strict';

exports.__esModule = true;

var _assertion = require('../../test-run/commands/assertion');

var _assertion2 = _interopRequireDefault(_assertion);

var _testRun = require('../../errors/test-run');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Assertion {
    constructor(actual, testController, callsite) {
        this.testController = testController;
        this.actual = actual;
        this.callsite = callsite;
    }

    then() {
        throw new _testRun.AssertionWithoutMethodCallError(this.callsite);
    }

    _enqueueAssertion(apiMethodName, assertionArgs) {
        let options = assertionArgs.opts || {};
        let message = assertionArgs.message;

        if (typeof message === 'object') {
            options = assertionArgs.message;
            message = void 0;
        }

        return this.testController._enqueueCommand(apiMethodName, _assertion2.default, {
            assertionType: apiMethodName,
            actual: this.actual,
            expected: assertionArgs.expected,
            expected2: assertionArgs.expected2,
            message: message,
            options: { timeout: options.timeout, allowUnawaitedPromise: options.allowUnawaitedPromise }
        });
    }

    eql(expected, message, opts) {
        return this._enqueueAssertion('eql', { expected, message, opts });
    }

    notEql(expected, message, opts) {
        return this._enqueueAssertion('notEql', { expected, message, opts });
    }

    ok(message, opts) {
        return this._enqueueAssertion('ok', { message, opts });
    }

    notOk(message, opts) {
        return this._enqueueAssertion('notOk', { message, opts });
    }

    contains(expected, message, opts) {
        return this._enqueueAssertion('contains', { expected, message, opts });
    }

    notContains(expected, message, opts) {
        return this._enqueueAssertion('notContains', { expected, message, opts });
    }

    typeOf(expected, message, opts) {
        return this._enqueueAssertion('typeOf', { expected, message, opts });
    }

    notTypeOf(expected, message, opts) {
        return this._enqueueAssertion('notTypeOf', { expected, message, opts });
    }

    gt(expected, message, opts) {
        return this._enqueueAssertion('gt', { expected, message, opts });
    }

    gte(expected, message, opts) {
        return this._enqueueAssertion('gte', { expected, message, opts });
    }

    lt(expected, message, opts) {
        return this._enqueueAssertion('lt', { expected, message, opts });
    }

    lte(expected, message, opts) {
        return this._enqueueAssertion('lte', { expected, message, opts });
    }

    within(start, finish, message, opts) {
        // NOTE: `within` is not available in Chai `assert` interface.
        return this._enqueueAssertion('within', { expected: start, expected2: finish, message, opts });
    }

    notWithin(start, finish, message, opts) {
        return this._enqueueAssertion('notWithin', { expected: start, expected2: finish, message, opts });
    }

    match(expected, message, opts) {
        return this._enqueueAssertion('match', { expected, message, opts });
    }

    notMatch(expected, message, opts) {
        return this._enqueueAssertion('notMatch', { expected, message, opts });
    }
}
exports.default = Assertion;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvdGVzdC1jb250cm9sbGVyL2Fzc2VydGlvbi5qcyJdLCJuYW1lcyI6WyJBc3NlcnRpb24iLCJjb25zdHJ1Y3RvciIsImFjdHVhbCIsInRlc3RDb250cm9sbGVyIiwiY2FsbHNpdGUiLCJ0aGVuIiwiQXNzZXJ0aW9uV2l0aG91dE1ldGhvZENhbGxFcnJvciIsIl9lbnF1ZXVlQXNzZXJ0aW9uIiwiYXBpTWV0aG9kTmFtZSIsImFzc2VydGlvbkFyZ3MiLCJvcHRpb25zIiwib3B0cyIsIm1lc3NhZ2UiLCJfZW5xdWV1ZUNvbW1hbmQiLCJBc3NlcnRpb25Db21tYW5kIiwiYXNzZXJ0aW9uVHlwZSIsImV4cGVjdGVkIiwiZXhwZWN0ZWQyIiwidGltZW91dCIsImFsbG93VW5hd2FpdGVkUHJvbWlzZSIsImVxbCIsIm5vdEVxbCIsIm9rIiwibm90T2siLCJjb250YWlucyIsIm5vdENvbnRhaW5zIiwidHlwZU9mIiwibm90VHlwZU9mIiwiZ3QiLCJndGUiLCJsdCIsImx0ZSIsIndpdGhpbiIsInN0YXJ0IiwiZmluaXNoIiwibm90V2l0aGluIiwibWF0Y2giLCJub3RNYXRjaCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFFZSxNQUFNQSxTQUFOLENBQWdCO0FBQzNCQyxnQkFBYUMsTUFBYixFQUFxQkMsY0FBckIsRUFBcUNDLFFBQXJDLEVBQStDO0FBQzNDLGFBQUtELGNBQUwsR0FBc0JBLGNBQXRCO0FBQ0EsYUFBS0QsTUFBTCxHQUFzQkEsTUFBdEI7QUFDQSxhQUFLRSxRQUFMLEdBQXNCQSxRQUF0QjtBQUNIOztBQUVEQyxXQUFRO0FBQ0osY0FBTSxJQUFJQyx3Q0FBSixDQUFvQyxLQUFLRixRQUF6QyxDQUFOO0FBQ0g7O0FBRURHLHNCQUFtQkMsYUFBbkIsRUFBa0NDLGFBQWxDLEVBQWlEO0FBQzdDLFlBQUlDLFVBQVVELGNBQWNFLElBQWQsSUFBc0IsRUFBcEM7QUFDQSxZQUFJQyxVQUFVSCxjQUFjRyxPQUE1Qjs7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ImFwaS90ZXN0LWNvbnRyb2xsZXIvYXNzZXJ0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc2VydGlvbkNvbW1hbmQgZnJvbSAnLi4vLi4vdGVzdC1ydW4vY29tbWFuZHMvYXNzZXJ0aW9uJztcbmltcG9ydCB7IEFzc2VydGlvbldpdGhvdXRNZXRob2RDYWxsRXJyb3IgfSBmcm9tICcuLi8uLi9lcnJvcnMvdGVzdC1ydW4nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NlcnRpb24ge1xuICAgIGNvbnN0cnVjdG9yIChhY3R1YWwsIHRlc3RDb250cm9sbGVyLCBjYWxsc2l0ZSkge1xuICAgICAgICB0aGlzLnRlc3RDb250cm9sbGVyID0gdGVzdENvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMuYWN0dWFsICAgICAgICAgPSBhY3R1YWw7XG4gICAgICAgIHRoaXMuY2FsbHNpdGUgICAgICAgPSBjYWxsc2l0ZTtcbiAgICB9XG5cbiAgICB0aGVuICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbldpdGhvdXRNZXRob2RDYWxsRXJyb3IodGhpcy5jYWxsc2l0ZSk7XG4gICAgfVxuXG4gICAgX2VucXVldWVBc3NlcnRpb24gKGFwaU1ldGhvZE5hbWUsIGFzc2VydGlvbkFyZ3MpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBhc3NlcnRpb25BcmdzLm9wdHMgfHwge307XG4gICAgICAgIGxldCBtZXNzYWdlID0gYXNzZXJ0aW9uQXJncy5tZXNzYWdlO1xuXG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NlcnRpb25BcmdzLm1lc3NhZ2U7XG4gICAgICAgICAgICBtZXNzYWdlID0gdm9pZCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGVzdENvbnRyb2xsZXIuX2VucXVldWVDb21tYW5kKGFwaU1ldGhvZE5hbWUsIEFzc2VydGlvbkNvbW1hbmQsIHtcbiAgICAgICAgICAgIGFzc2VydGlvblR5cGU6IGFwaU1ldGhvZE5hbWUsXG4gICAgICAgICAgICBhY3R1YWw6ICAgICAgICB0aGlzLmFjdHVhbCxcbiAgICAgICAgICAgIGV4cGVjdGVkOiAgICAgIGFzc2VydGlvbkFyZ3MuZXhwZWN0ZWQsXG4gICAgICAgICAgICBleHBlY3RlZDI6ICAgICBhc3NlcnRpb25BcmdzLmV4cGVjdGVkMixcbiAgICAgICAgICAgIG1lc3NhZ2U6ICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBvcHRpb25zOiAgICAgICB7IHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCwgYWxsb3dVbmF3YWl0ZWRQcm9taXNlOiBvcHRpb25zLmFsbG93VW5hd2FpdGVkUHJvbWlzZSB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGVxbCAoZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWVBc3NlcnRpb24oJ2VxbCcsIHsgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbm90RXFsIChleHBlY3RlZCwgbWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignbm90RXFsJywgeyBleHBlY3RlZCwgbWVzc2FnZSwgb3B0cyB9KTtcbiAgICB9XG5cbiAgICBvayAobWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignb2snLCB7IG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbm90T2sgKG1lc3NhZ2UsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWVBc3NlcnRpb24oJ25vdE9rJywgeyBtZXNzYWdlLCBvcHRzIH0pO1xuICAgIH1cblxuICAgIGNvbnRhaW5zIChleHBlY3RlZCwgbWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignY29udGFpbnMnLCB7IGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzIH0pO1xuICAgIH1cblxuICAgIG5vdENvbnRhaW5zIChleHBlY3RlZCwgbWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignbm90Q29udGFpbnMnLCB7IGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzIH0pO1xuICAgIH1cblxuICAgIHR5cGVPZiAoZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWVBc3NlcnRpb24oJ3R5cGVPZicsIHsgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbm90VHlwZU9mIChleHBlY3RlZCwgbWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignbm90VHlwZU9mJywgeyBleHBlY3RlZCwgbWVzc2FnZSwgb3B0cyB9KTtcbiAgICB9XG5cbiAgICBndCAoZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWVBc3NlcnRpb24oJ2d0JywgeyBleHBlY3RlZCwgbWVzc2FnZSwgb3B0cyB9KTtcbiAgICB9XG5cbiAgICBndGUgKGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlQXNzZXJ0aW9uKCdndGUnLCB7IGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzIH0pO1xuICAgIH1cblxuICAgIGx0IChleHBlY3RlZCwgbWVzc2FnZSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5xdWV1ZUFzc2VydGlvbignbHQnLCB7IGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzIH0pO1xuICAgIH1cblxuICAgIGx0ZSAoZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWVBc3NlcnRpb24oJ2x0ZScsIHsgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgd2l0aGluIChzdGFydCwgZmluaXNoLCBtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIC8vIE5PVEU6IGB3aXRoaW5gIGlzIG5vdCBhdmFpbGFibGUgaW4gQ2hhaSBgYXNzZXJ0YCBpbnRlcmZhY2UuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlQXNzZXJ0aW9uKCd3aXRoaW4nLCB7IGV4cGVjdGVkOiBzdGFydCwgZXhwZWN0ZWQyOiBmaW5pc2gsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbm90V2l0aGluIChzdGFydCwgZmluaXNoLCBtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlQXNzZXJ0aW9uKCdub3RXaXRoaW4nLCB7IGV4cGVjdGVkOiBzdGFydCwgZXhwZWN0ZWQyOiBmaW5pc2gsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbWF0Y2ggKGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlQXNzZXJ0aW9uKCdtYXRjaCcsIHsgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxuXG4gICAgbm90TWF0Y2ggKGV4cGVjdGVkLCBtZXNzYWdlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlQXNzZXJ0aW9uKCdub3RNYXRjaCcsIHsgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wdHMgfSk7XG4gICAgfVxufVxuIl19
