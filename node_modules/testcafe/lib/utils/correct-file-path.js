'use strict';

exports.__esModule = true;

exports.default = function (filePath, expectedExtention) {
    filePath = filePath.replace(new RegExp((0, _lodash.escapeRegExp)(_path2.default.win32.sep), 'g'), _path2.default.posix.sep);

    const correctedPath = filePath.split(_path2.default.posix.sep).map(str => (0, _sanitizeFilename2.default)(str)).join(_path2.default.sep);

    if (!expectedExtention) return correctedPath;

    const extentionRe = new RegExp((0, _lodash.escapeRegExp)(expectedExtention));

    return extentionRe.test(correctedPath) ? correctedPath : `${correctedPath}.${expectedExtention}`;
};

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _sanitizeFilename = require('sanitize-filename');

var _sanitizeFilename2 = _interopRequireDefault(_sanitizeFilename);

var _lodash = require('lodash');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9jb3JyZWN0LWZpbGUtcGF0aC5qcyJdLCJuYW1lcyI6WyJmaWxlUGF0aCIsImV4cGVjdGVkRXh0ZW50aW9uIiwicmVwbGFjZSIsIlJlZ0V4cCIsInBhdGgiLCJ3aW4zMiIsInNlcCIsInBvc2l4IiwiY29ycmVjdGVkUGF0aCIsInNwbGl0IiwibWFwIiwic3RyIiwiam9pbiIsImV4dGVudGlvblJlIiwidGVzdCJdLCJtYXBwaW5ncyI6Ijs7OztrQkFJZSxVQUFVQSxRQUFWLEVBQW9CQyxpQkFBcEIsRUFBdUM7QUFDbERELGVBQVdBLFNBQVNFLE9BQVQsQ0FBaUIsSUFBSUMsTUFBSixDQUFXLDBCQUFTQyxlQUFLQyxLQUFMLENBQVdDLEdBQXBCLENBQVgsRUFBcUMsR0FBckMsQ0FBakIsRUFBNERGLGVBQUtHLEtBQUwsQ0FBV0QsR0FBdkUsQ0FBWDs7QUFFQSxVQUFNRSxnQkFBZ0JSLFNBQ2pCUyxLQURpQixDQUNYTCxlQUFLRyxLQUFMLENBQVdELEdBREEsRUFFakJJLEdBRmlCLENBRWJDLE9BQU8sZ0NBQWlCQSxHQUFqQixDQUZNLEVBR2pCQyxJQUhpQixDQUdaUixlQUFLRSxHQUhPLENBQXRCOztBQUtBLFFBQUksQ0FBQ0wsaUJBQUwsRUFDSSxPQUFPTyxhQUFQOztBQUVKLFVBQU1LLGNBQWMsSUFBSVYsTUFBSixDQUFXLDBCQUFTRixpQkFBVCxDQUFYLENBQXBCOztBQUVBLFdBQU9ZLFlBQVlDLElBQVosQ0FBaUJOLGFBQWpCLElBQWtDQSxhQUFsQyxHQUFtRCxHQUFFQSxhQUFjLElBQUdQLGlCQUFrQixFQUEvRjtBQUNILEM7O0FBbEJEOzs7O0FBQ0E7Ozs7QUFDQSIsImZpbGUiOiJ1dGlscy9jb3JyZWN0LWZpbGUtcGF0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHNhbml0aXplRmlsZW5hbWUgZnJvbSAnc2FuaXRpemUtZmlsZW5hbWUnO1xuaW1wb3J0IHsgZXNjYXBlUmVnRXhwIGFzIGVzY2FwZVJlIH0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZpbGVQYXRoLCBleHBlY3RlZEV4dGVudGlvbikge1xuICAgIGZpbGVQYXRoID0gZmlsZVBhdGgucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlKHBhdGgud2luMzIuc2VwKSwgJ2cnKSwgcGF0aC5wb3NpeC5zZXApO1xuXG4gICAgY29uc3QgY29ycmVjdGVkUGF0aCA9IGZpbGVQYXRoXG4gICAgICAgIC5zcGxpdChwYXRoLnBvc2l4LnNlcClcbiAgICAgICAgLm1hcChzdHIgPT4gc2FuaXRpemVGaWxlbmFtZShzdHIpKVxuICAgICAgICAuam9pbihwYXRoLnNlcCk7XG5cbiAgICBpZiAoIWV4cGVjdGVkRXh0ZW50aW9uKVxuICAgICAgICByZXR1cm4gY29ycmVjdGVkUGF0aDtcblxuICAgIGNvbnN0IGV4dGVudGlvblJlID0gbmV3IFJlZ0V4cChlc2NhcGVSZShleHBlY3RlZEV4dGVudGlvbikpO1xuXG4gICAgcmV0dXJuIGV4dGVudGlvblJlLnRlc3QoY29ycmVjdGVkUGF0aCkgPyBjb3JyZWN0ZWRQYXRoIDogYCR7Y29ycmVjdGVkUGF0aH0uJHtleHBlY3RlZEV4dGVudGlvbn1gO1xufVxuIl19
