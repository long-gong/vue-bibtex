'use strict';

exports.__esModule = true;
exports.AssertionOptions = exports.ResizeToFitDeviceOptions = exports.DragToElementOptions = exports.TypeOptions = exports.MoveOptions = exports.ClickOptions = exports.MouseOptions = exports.ElementScreenshotOptions = exports.ScrollOptions = exports.OffsetOptions = exports.ActionOptions = exports.speedOption = exports.booleanOption = exports.positiveIntegerOption = exports.integerOption = undefined;

var _assignable = require('../../utils/assignable');

var _assignable2 = _interopRequireDefault(_assignable);

var _factories = require('./validations/factories');

var _testRun = require('../../errors/test-run');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const integerOption = exports.integerOption = (0, _factories.createIntegerValidator)(_testRun.ActionIntegerOptionError); // -------------------------------------------------------------
// WARNING: this file is used by both the client and the server.
// Do not use any browser or node-specific API!
// -------------------------------------------------------------

const positiveIntegerOption = exports.positiveIntegerOption = (0, _factories.createPositiveIntegerValidator)(_testRun.ActionPositiveIntegerOptionError);
const booleanOption = exports.booleanOption = (0, _factories.createBooleanValidator)(_testRun.ActionBooleanOptionError);
const speedOption = exports.speedOption = (0, _factories.createSpeedValidator)(_testRun.ActionSpeedOptionError);

// Acitons
class ActionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.speed = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'speed', type: speedOption }];
    }
}

exports.ActionOptions = ActionOptions; // Offset

class OffsetOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.offsetX = null;
        this.offsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'offsetX', type: integerOption }, { name: 'offsetY', type: integerOption }]);
    }
}

exports.OffsetOptions = OffsetOptions;
class ScrollOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.scrollToCenter = false;
        this.skipParentFrames = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollToCenter', type: booleanOption }, { name: 'skipParentFrames', type: booleanOption }]);
    }
}

exports.ScrollOptions = ScrollOptions; // Element Screenshot

class ElementScreenshotOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.scrollTargetX = null;
        this.scrollTargetY = null;
        this.includeMargins = false;
        this.includeBorders = true;
        this.includePaddings = true;

        this.crop = {
            left: null,
            right: null,
            top: null,
            bottom: null
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollTargetX', type: integerOption }, { name: 'scrollTargetY', type: integerOption }, { name: 'crop.left', type: integerOption }, { name: 'crop.right', type: integerOption }, { name: 'crop.top', type: integerOption }, { name: 'crop.bottom', type: integerOption }, { name: 'includeMargins', type: booleanOption }, { name: 'includeBorders', type: booleanOption }, { name: 'includePaddings', type: booleanOption }]);
    }
}

exports.ElementScreenshotOptions = ElementScreenshotOptions; // Mouse

class MouseOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.modifiers = {
            ctrl: false,
            alt: false,
            shift: false,
            meta: false
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'modifiers.ctrl', type: booleanOption }, { name: 'modifiers.alt', type: booleanOption }, { name: 'modifiers.shift', type: booleanOption }, { name: 'modifiers.meta', type: booleanOption }]);
    }
}

exports.MouseOptions = MouseOptions; // Click

class ClickOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.caretPos = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'caretPos', type: positiveIntegerOption }]);
    }
}

exports.ClickOptions = ClickOptions; // Move

class MoveOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.speed = null;
        this.minMovingTime = null;
        this.holdLeftButton = false;
        this.skipScrolling = false;
        this.skipDefaultDragBehavior = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'speed' }, { name: 'minMovingTime' }, { name: 'holdLeftButton' }, { name: 'skipScrolling', type: booleanOption }, { name: 'skipDefaultDragBehavior', type: booleanOption }]);
    }
}

exports.MoveOptions = MoveOptions; // Type

class TypeOptions extends ClickOptions {
    constructor(obj, validate) {
        super();

        this.replace = false;
        this.paste = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'replace', type: booleanOption }, { name: 'paste', type: booleanOption }]);
    }
}

exports.TypeOptions = TypeOptions; // DragToElement

class DragToElementOptions extends MouseOptions {
    constructor(obj, validate) {
        super(obj, validate);

        this.destinationOffsetX = null;
        this.destinationOffsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'destinationOffsetX', type: integerOption }, { name: 'destinationOffsetY', type: integerOption }]);
    }
}

exports.DragToElementOptions = DragToElementOptions; //ResizeToFitDevice

class ResizeToFitDeviceOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.portraitOrientation = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'portraitOrientation', type: booleanOption }];
    }
}

exports.ResizeToFitDeviceOptions = ResizeToFitDeviceOptions; //Assertion

class AssertionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.timeout = void 0;
        this.allowUnawaitedPromise = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'timeout', type: positiveIntegerOption }, { name: 'allowUnawaitedPromise', type: booleanOption }];
    }
}
exports.AssertionOptions = AssertionOptions;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIl0sIm5hbWVzIjpbImludGVnZXJPcHRpb24iLCJBY3Rpb25JbnRlZ2VyT3B0aW9uRXJyb3IiLCJwb3NpdGl2ZUludGVnZXJPcHRpb24iLCJBY3Rpb25Qb3NpdGl2ZUludGVnZXJPcHRpb25FcnJvciIsImJvb2xlYW5PcHRpb24iLCJBY3Rpb25Cb29sZWFuT3B0aW9uRXJyb3IiLCJzcGVlZE9wdGlvbiIsIkFjdGlvblNwZWVkT3B0aW9uRXJyb3IiLCJBY3Rpb25PcHRpb25zIiwiQXNzaWduYWJsZSIsImNvbnN0cnVjdG9yIiwib2JqIiwidmFsaWRhdGUiLCJzcGVlZCIsIl9hc3NpZ25Gcm9tIiwiX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzIiwibmFtZSIsInR5cGUiLCJPZmZzZXRPcHRpb25zIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjb25jYXQiLCJTY3JvbGxPcHRpb25zIiwic2Nyb2xsVG9DZW50ZXIiLCJza2lwUGFyZW50RnJhbWVzIiwiRWxlbWVudFNjcmVlbnNob3RPcHRpb25zIiwic2Nyb2xsVGFyZ2V0WCIsInNjcm9sbFRhcmdldFkiLCJpbmNsdWRlTWFyZ2lucyIsImluY2x1ZGVCb3JkZXJzIiwiaW5jbHVkZVBhZGRpbmdzIiwiY3JvcCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsIk1vdXNlT3B0aW9ucyIsIm1vZGlmaWVycyIsImN0cmwiLCJhbHQiLCJzaGlmdCIsIm1ldGEiLCJDbGlja09wdGlvbnMiLCJjYXJldFBvcyIsIk1vdmVPcHRpb25zIiwibWluTW92aW5nVGltZSIsImhvbGRMZWZ0QnV0dG9uIiwic2tpcFNjcm9sbGluZyIsInNraXBEZWZhdWx0RHJhZ0JlaGF2aW9yIiwiVHlwZU9wdGlvbnMiLCJyZXBsYWNlIiwicGFzdGUiLCJEcmFnVG9FbGVtZW50T3B0aW9ucyIsImRlc3RpbmF0aW9uT2Zmc2V0WCIsImRlc3RpbmF0aW9uT2Zmc2V0WSIsIlJlc2l6ZVRvRml0RGV2aWNlT3B0aW9ucyIsInBvcnRyYWl0T3JpZW50YXRpb24iLCJBc3NlcnRpb25PcHRpb25zIiwidGltZW91dCIsImFsbG93VW5hd2FpdGVkUHJvbWlzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFLQTs7OztBQUNBOztBQU1BOzs7O0FBT08sTUFBTUEsd0NBQXdCLHVDQUF1QkMsaUNBQXZCLENBQTlCLEMsQ0FuQlA7QUFDQTtBQUNBO0FBQ0E7O0FBaUJPLE1BQU1DLHdEQUF3QiwrQ0FBK0JDLHlDQUEvQixDQUE5QjtBQUNBLE1BQU1DLHdDQUF3Qix1Q0FBdUJDLGlDQUF2QixDQUE5QjtBQUNBLE1BQU1DLG9DQUF3QixxQ0FBcUJDLCtCQUFyQixDQUE5Qjs7QUFHUDtBQUNPLE1BQU1DLGFBQU4sU0FBNEJDLG9CQUE1QixDQUF1QztBQUMxQ0MsZ0JBQWFDLEdBQWIsRUFBa0JDLFFBQWxCLEVBQTRCO0FBQ3hCOztBQUVBLGFBQUtDLEtBQUwsR0FBYSxJQUFiOztBQUVBLGFBQUtDLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxDQUNILEVBQUVDLE1BQU0sT0FBUixFQUFpQkMsTUFBTVgsV0FBdkIsRUFERyxDQUFQO0FBR0g7QUFieUM7O1FBQWpDRSxhLEdBQUFBLGEsRUFnQmI7O0FBQ08sTUFBTVUsYUFBTixTQUE0QlYsYUFBNUIsQ0FBMEM7QUFDN0NFLGdCQUFhQyxHQUFiLEVBQWtCQyxRQUFsQixFQUE0QjtBQUN4Qjs7QUFFQSxhQUFLTyxPQUFMLEdBQWUsSUFBZjtBQUNBLGFBQUtDLE9BQUwsR0FBZSxJQUFmOztBQUVBLGFBQUtOLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxNQUFNQSx3QkFBTixHQUFpQ00sTUFBakMsQ0FBd0MsQ0FDM0MsRUFBRUwsTUFBTSxTQUFSLEVBQW1CQyxNQUFNakIsYUFBekIsRUFEMkMsRUFFM0MsRUFBRWdCLE1BQU0sU0FBUixF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QUFhQyxHQUFiLEVBQWtCQyxRQUFsQixFQUE0QjtBQUN4Qjs7QUFFQSxhQUFLNEMsbUJBQUwsR0FBMkIsS0FBM0I7O0FBRUEsYUFBSzFDLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxDQUNILEVBQUVDLE1BQU0scUJBQVIsRUFBK0JDLE1BQU1iLGFBQXJDLEVBREcsQ0FBUDtBQUdIO0FBYm9EOztRQUE1Q21ELHdCLEdBQUFBLHdCLEVBZ0JiOztBQUNPLE1BQU1FLGdCQUFOLFNBQStCaEQsb0JBQS9CLENBQTBDO0FBQzdDQyxnQkFBYUMsR0FBYixFQUFrQkMsUUFBbEIsRUFBNEI7QUFDeEI7O0FBRUEsYUFBSzhDLE9BQUwsR0FBNkIsS0FBSyxDQUFsQztBQUNBLGFBQUtDLHFCQUFMLEdBQTZCLEtBQTdCOztBQUVBLGFBQUs3QyxXQUFMLENBQWlCSCxHQUFqQixFQUFzQkMsUUFBdEI7QUFDSDs7QUFFREcsK0JBQTRCO0FBQ3hCLGVBQU8sQ0FDSCxFQUFFQyxNQUFNLFNBQVIsRUFBbUJDLE1BQU1mLHFCQUF6QixFQURHLEVBRUgsRUFBRWMsTUFBTSx1QkFBUixFQUFpQ0MsTUFBTWIsYUFBdkMsRUFGRyxDQUFQO0FBSUg7QUFmNEM7UUFBcENxRCxnQixHQUFBQSxnQiIsImZpbGUiOiJ0ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gV0FSTklORzogdGhpcyBmaWxlIGlzIHVzZWQgYnkgYm90aCB0aGUgY2xpZW50IGFuZCB0aGUgc2VydmVyLlxuLy8gRG8gbm90IHVzZSBhbnkgYnJvd3NlciBvciBub2RlLXNwZWNpZmljIEFQSSFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW1wb3J0IEFzc2lnbmFibGUgZnJvbSAnLi4vLi4vdXRpbHMvYXNzaWduYWJsZSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IsXG4gICAgY3JlYXRlSW50ZWdlclZhbGlkYXRvcixcbiAgICBjcmVhdGVQb3NpdGl2ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlU3BlZWRWYWxpZGF0b3Jcbn0gZnJvbSAnLi92YWxpZGF0aW9ucy9mYWN0b3JpZXMnO1xuaW1wb3J0IHtcbiAgICBBY3Rpb25JbnRlZ2VyT3B0aW9uRXJyb3IsXG4gICAgQWN0aW9uUG9zaXRpdmVJbnRlZ2VyT3B0aW9uRXJyb3IsXG4gICAgQWN0aW9uQm9vbGVhbk9wdGlvbkVycm9yLFxuICAgIEFjdGlvblNwZWVkT3B0aW9uRXJyb3Jcbn0gZnJvbSAnLi4vLi4vZXJyb3JzL3Rlc3QtcnVuJztcblxuZXhwb3J0IGNvbnN0IGludGVnZXJPcHRpb24gICAgICAgICA9IGNyZWF0ZUludGVnZXJWYWxpZGF0b3IoQWN0aW9uSW50ZWdlck9wdGlvbkVycm9yKTtcbmV4cG9ydCBjb25zdCBwb3NpdGl2ZUludGVnZXJPcHRpb24gPSBjcmVhdGVQb3NpdGl2ZUludGVnZXJWYWxpZGF0b3IoQWN0aW9uUG9zaXRpdmVJbnRlZ2VyT3B0aW9uRXJyb3IpO1xuZXhwb3J0IGNvbnN0IGJvb2xlYW5PcHRpb24gICAgICAgICA9IGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IoQWN0aW9uQm9vbGVhbk9wdGlvbkVycm9yKTtcbmV4cG9ydCBjb25zdCBzcGVlZE9wdGlvbiAgICAgICAgICAgPSBjcmVhdGVTcGVlZFZhbGlkYXRvcihBY3Rpb25TcGVlZE9wdGlvbkVycm9yKTtcblxuXG4vLyBBY2l0b25zXG5leHBvcnQgY2xhc3MgQWN0aW9uT3B0aW9ucyBleHRlbmRzIEFzc2lnbmFibGUge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zcGVlZCA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgeyBuYW1lOiAnc3BlZWQnLCB0eXBlOiBzcGVlZE9wdGlvbiB9XG4gICAgICAgIF07XG4gICAgfVxufVxuXG4vLyBPZmZzZXRcbmV4cG9ydCBjbGFzcyBPZmZzZXRPcHRpb25zIGV4dGVuZHMgQWN0aW9uT3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm9mZnNldFggPSBudWxsO1xuICAgICAgICB0aGlzLm9mZnNldFkgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdvZmZzZXRYJywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnb2Zmc2V0WScsIHR5cGU6IGludGVnZXJPcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTY3JvbGxPcHRpb25zIGV4dGVuZHMgT2Zmc2V0T3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnNjcm9sbFRvQ2VudGVyICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za2lwUGFyZW50RnJhbWVzID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzKCkuY29uY2F0KFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3Njcm9sbFRvQ2VudGVyJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2tpcFBhcmVudEZyYW1lcycsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbi8vIEVsZW1lbnQgU2NyZWVuc2hvdFxuZXhwb3J0IGNsYXNzIEVsZW1lbnRTY3JlZW5zaG90T3B0aW9ucyBleHRlbmRzIEFjdGlvbk9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRYICAgPSBudWxsO1xuICAgICAgICB0aGlzLnNjcm9sbFRhcmdldFkgICA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5jbHVkZU1hcmdpbnMgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5jbHVkZUJvcmRlcnMgID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmNsdWRlUGFkZGluZ3MgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuY3JvcCA9IHtcbiAgICAgICAgICAgIGxlZnQ6ICAgbnVsbCxcbiAgICAgICAgICAgIHJpZ2h0OiAgbnVsbCxcbiAgICAgICAgICAgIHRvcDogICAgbnVsbCxcbiAgICAgICAgICAgIGJvdHRvbTogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdzY3JvbGxUYXJnZXRYJywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2Nyb2xsVGFyZ2V0WScsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2Nyb3AubGVmdCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2Nyb3AucmlnaHQnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLnRvcCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2Nyb3AuYm90dG9tJywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaW5jbHVkZU1hcmdpbnMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdpbmNsdWRlQm9yZGVycycsIHR5cGU6IGJvb2xlYW5PcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2luY2x1ZGVQYWRkaW5ncycsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbi8vIE1vdXNlXG5leHBvcnQgY2xhc3MgTW91c2VPcHRpb25zIGV4dGVuZHMgT2Zmc2V0T3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm1vZGlmaWVycyA9IHtcbiAgICAgICAgICAgIGN0cmw6ICBmYWxzZSxcbiAgICAgICAgICAgIGFsdDogICBmYWxzZSxcbiAgICAgICAgICAgIHNoaWZ0OiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGE6ICBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMuY3RybCcsIHR5cGU6IGJvb2xlYW5PcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ21vZGlmaWVycy5hbHQnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMuc2hpZnQnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMubWV0YScsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cblxuLy8gQ2xpY2tcbmV4cG9ydCBjbGFzcyBDbGlja09wdGlvbnMgZXh0ZW5kcyBNb3VzZU9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5jYXJldFBvcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzKCkuY29uY2F0KFtcbiAgICAgICAgICAgIHsgbmFtZTogJ2NhcmV0UG9zJywgdHlwZTogcG9zaXRpdmVJbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBNb3ZlXG5leHBvcnQgY2xhc3MgTW92ZU9wdGlvbnMgZXh0ZW5kcyBNb3VzZU9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zcGVlZCAgICAgICAgICAgICAgICAgICA9IG51bGw7XG4gICAgICAgIHRoaXMubWluTW92aW5nVGltZSAgICAgICAgICAgPSBudWxsO1xuICAgICAgICB0aGlzLmhvbGRMZWZ0QnV0dG9uICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcFNjcm9sbGluZyAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za2lwRGVmYXVsdERyYWdCZWhhdmlvciA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdzcGVlZCcgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ21pbk1vdmluZ1RpbWUnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdob2xkTGVmdEJ1dHRvbicgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3NraXBTY3JvbGxpbmcnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdza2lwRGVmYXVsdERyYWdCZWhhdmlvcicsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbi8vIFR5cGVcbmV4cG9ydCBjbGFzcyBUeXBlT3B0aW9ucyBleHRlbmRzIENsaWNrT3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnJlcGxhY2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXN0ZSAgID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzKCkuY29uY2F0KFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3JlcGxhY2UnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdwYXN0ZScsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbi8vIERyYWdUb0VsZW1lbnRcbmV4cG9ydCBjbGFzcyBEcmFnVG9FbGVtZW50T3B0aW9ucyBleHRlbmRzIE1vdXNlT3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIob2JqLCB2YWxpZGF0ZSk7XG5cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbk9mZnNldFggPSBudWxsO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uT2Zmc2V0WSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzKCkuY29uY2F0KFtcbiAgICAgICAgICAgIHsgbmFtZTogJ2Rlc3RpbmF0aW9uT2Zmc2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2Rlc3RpbmF0aW9uT2Zmc2V0WScsIHR5cGU6IGludGVnZXJPcHRpb24gfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5cbi8vUmVzaXplVG9GaXREZXZpY2VcbmV4cG9ydCBjbGFzcyBSZXNpemVUb0ZpdERldmljZU9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMucG9ydHJhaXRPcmllbnRhdGlvbiA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3BvcnRyYWl0T3JpZW50YXRpb24nLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXTtcbiAgICB9XG59XG5cbi8vQXNzZXJ0aW9uXG5leHBvcnQgY2xhc3MgQXNzZXJ0aW9uT3B0aW9ucyBleHRlbmRzIEFzc2lnbmFibGUge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50aW1lb3V0ICAgICAgICAgICAgICAgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuYWxsb3dVbmF3YWl0ZWRQcm9taXNlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fYXNzaWduRnJvbShvYmosIHZhbGlkYXRlKTtcbiAgICB9XG5cbiAgICBfZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMgKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgeyBuYW1lOiAndGltZW91dCcsIHR5cGU6IHBvc2l0aXZlSW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnYWxsb3dVbmF3YWl0ZWRQcm9taXNlJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9XG4gICAgICAgIF07XG4gICAgfVxufVxuIl19
