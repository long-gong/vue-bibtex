!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(u){"use strict";var f,h,o,m,p,i={".js":[],".json":[],".css":[],".html":[]},l="function"==typeof require?require:null;return m=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,r){var n,o;if("function"==typeof e[t+r])return t+r;for(n=0;o=i[r][n];++n)if("function"==typeof e[t+o])return t+o;return null},f=function(e,t,r,n,o,i){var a,s,u,l,c,d;for("."!==(a=(r=r.split(/[\\/]/)).pop())&&".."!==a||(r.push(a),a="");null!=(s=r.shift());)if(s&&"."!==s&&(".."===s?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[s],i+="/"+s),!e))throw m(n);if(a&&"function"!=typeof e[a]&&((d=p(e,a,".js"))||(d=p(e,a,".json")),d||(d=p(e,a,".css")),d||(d=p(e,a,".html")),d?a=d:2!==o&&"object"==typeof e[a]&&(t.push(e),e=e[a],i+="/"+a,a="")),!a)return 1!==o&&e[":mainpath:"]?f(e,t,e[":mainpath:"],n,1,i):f(e,t,"index",n,2,i);if(!(c=e[a]))throw m(n);return c.hasOwnProperty("module")?c.module.exports:(u={},c.module=l={exports:u,id:i+"/"+a},c.call(u,u,l,h(e,t,i)),l.exports)},o=function(e,t,r,n){var o,i=r,a=r.charAt(0),s=0;if("/"===a){if(i=i.slice(1),!(e=u["/"])){if(l)return l(r);throw m(r)}n="/",t=[]}else if("."!==a){if(o=i.split("/",1)[0],!(e=u[o])){if(l)return l(r);throw m(r)}n=o,t=[],(i=i.slice(o.length+1))||(s=(i=e[":mainpath:"])?1:(i="index",2))}return f(e,t,i,r,s,n)},(h=function(t,r,n){return function(e){return o(t,[].concat(r),e,n)}})(u,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(O,P,Q){var R="@t",T=/^#*@(t|r)$/,U=eval("this"),V="function"==typeof ArrayBuffer,W="function"==typeof Map,X="function"==typeof Set,Y=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],Z=Array.prototype.slice,$={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},_=function(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0};_._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},_.prototype._createCircularCandidate=function(e,t,r){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:r,refIdx:-1})},_.prototype._applyTransform=function(e,t,r,n){var o=Object.create(null),i=n.toSerializable(e);return"object"==typeof i&&this._createCircularCandidate(e,t,r),o[R]=n.type,o.data=this._handleValue(i,t,r),o},_.prototype._handleArray=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=this._handleValue(e[r],t,r);return t},_.prototype._handlePlainObject=function(r){var n=this,o=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(e){var t=T.test(e)?"#"+e:e;o[t]=n._handleValue(r[e],o,t)}),o},_.prototype._handleObject=function(e,t,r){return this._createCircularCandidate(e,t,r),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},_.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(-1<t){var r=this.circularCandidatesDescrs[t];return-1===r.refIdx&&(r.refIdx=r.parent?++this.circularRefCount:0),_._createRefMark(r.refIdx)}return null},_.prototype._handleValue=function(e,t,r){var n=typeof e,o="object"===n&&null!==e;if(o){var i=this._ensureCircularReference(e);if(i)return i}for(var a=0;a<this.transforms.length;a++){var s=this.transforms[a];if(s.shouldTransform(n,e))return this._applyTransform(e,t,r,s)}return o?this._handleObject(e,t,r):e},_.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var r=this.circularCandidatesDescrs[t];0<r.refIdx&&(e[r.refIdx]=r.parent[r.key],r.parent[r.key]=_._createRefMark(r.refIdx))}return e};var aa=function(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)};aa.prototype._handlePlainObject=function(t){var r=this,n=Object.create(null),e=Object.getOwnPropertyNames(t);for(var o in e.forEach(function(e){r._handleValue(t[e],t,e),T.test(e)&&(n[e.substring(1)]=t[e],delete t[e])}),n)t[o]=n[o]},aa.prototype._handleTransformedObject=function(e,t,r){var n=e[R],o=this.transformMap[n];if(!o)throw new Error("Can't find transform for \""+n+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[r]=o.fromSerializable(e.data)},aa.prototype._handleCircularSelfRefDuringTransform=function(e,t,r){var n=this.references,o=void 0;Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){return void 0===o&&(o=n[e]),o},set:function(e){return o=e}})},aa.prototype._handleCircularRef=function(e,t,r){-1<this.activeTransformsStack.indexOf(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,r):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[r]=this.references[e])},aa.prototype._handleValue=function(e,t,r){if("object"==typeof e&&null!==e){var n=e["@r"];if(void 0!==n)this._handleCircularRef(n,t,r);else if(e[R])this._handleTransformedObject(e,t,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this._handleValue(e[o],e,o);else this._handlePlainObject(e)}},aa.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var ba=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(U[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return V&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return Z.call(t)},fromSerializable:function(e){if(V){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var r=0;r<Y.length;r++){var n=Y[r];if("function"==typeof U[n]&&t instanceof U[n])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:Z.call(e)}},fromSerializable:function(e){return"function"==typeof U[e.ctorName]?new U[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return W&&t instanceof Map},toSerializable:function(e){var r=[];return e.forEach(function(e,t){r.push(t),r.push(e)}),r},fromSerializable:function(e){if(W){for(var t=new Map,r=0;r<e.length;r+=2)t.set(e[r],e[r+1]);return t}for(var n=[],o=0;o<e.length;o+=2)n.push([e[r],e[r+1]]);return n}},{type:"[[Set]]",shouldTransform:function(e,t){return X&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(X){for(var t=new Set,r=0;r<e.length;r++)t.add(e[r]);return t}return e}}],ca=P.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||$,this.addTransforms(ba)};ca.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t];if(this.transformsMap[r.type])throw new Error('Transform with type "'+r.type+'" was already added.');this.transforms.push(r),this.transformsMap[r.type]=r}return this},ca.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t],n=this.transforms.indexOf(r);-1<n&&this.transforms.splice(n,1),delete this.transformsMap[r.type]}return this},ca.prototype.encode=function(e){var t=new _(e,this.transforms).transform();return this.serializer.serialize(t)},ca.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new aa(t,this.transformsMap).transform()}}},"testcafe-release":{src:{client:{driver:{"command-executors":{"browser-manipulation":{"ensure-crop-options.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t){var r=e.getBoundingClientRect(),n={left:r.left,right:r.right,top:r.top,bottom:r.bottom},o=y.styleUtils.getElementMargin(e),i=y.styleUtils.getElementPadding(e),a=y.styleUtils.getBordersWidth(e);t.originOffset={x:0,y:0};var s=n.left+e.scrollWidth+a.left+a.right,u=n.top+e.scrollHeight+a.top+a.bottom;n.right=Math.max(n.right,s),n.bottom=Math.max(n.bottom,u),t.includeBorders&&t.includePaddings?t.includeMargins&&(t.originOffset.x-=o.left,t.originOffset.y-=o.top,n.left-=o.left,n.top-=o.top,n.right+=o.right,n.bottom+=o.bottom):(t.originOffset.x+=a.left,t.originOffset.y+=a.top,n.left+=a.left,n.top+=a.top,n.right-=a.right,n.bottom-=a.bottom,t.includePaddings||(t.originOffset.x+=i.left,t.originOffset.y+=i.top,n.left+=i.left,n.top+=i.top,n.right-=i.right,n.bottom-=i.bottom));n.width=n.right-n.left,n.height=n.bottom-n.top;var l=S({min:t.crop.left,max:t.crop.right,length:t.crop.width},n.width),c=S({min:t.crop.top,max:t.crop.bottom,length:t.crop.height},n.height);if(t.crop.left=l.min,t.crop.right=l.max,t.crop.width=l.length,t.crop.top=c.min,t.crop.bottom=c.max,t.crop.height=c.length,t.crop.width<=0||t.crop.height<=0)throw new _.InvalidElementScreenshotDimensionsError(t.crop.width,t.crop.height);var d=y.styleUtils.getViewportDimensions();(n.width>d.width||n.height>d.height)&&(t.scrollToCenter=!0);var f="number"==typeof t.scrollTargetX,h="number"==typeof t.scrollTargetY;f||(t.scrollTargetX=b(t.crop.left,t.crop.right,d.width));h||(t.scrollTargetY=b(t.crop.top,t.crop.bottom,d.height));var m=(0,w.getOffsetOptions)(e,t.scrollTargetX,t.scrollTargetY),p=m.offsetX,g=m.offsetY;t.scrollTargetX=p,t.scrollTargetY=g;var E=!f||t.scrollTargetX>=t.crop.left&&t.scrollTargetX<=t.crop.right,v=!h||t.scrollTargetY>=t.crop.top&&t.scrollTargetY<=t.crop.bottom;if(!E||!v)throw new _.ActionInvalidScrollTargetError(E,v)};var n,y=r("../../deps/testcafe-core"),w=r("../../deps/testcafe-automation"),o=r("../../../../utils/limit-number"),i=(n=o)&&n.__esModule?n:{default:n},_=r("../../../../errors/test-run");function S(e,t){var r="number"==typeof e.min,n="number"==typeof e.max,o="number"==typeof e.length;return o&&(e.length=(0,i.default)(e.length,0,t)),r&&e.min<0&&(e.min+=t),n&&e.max<0&&(e.max+=t),r||(e.min=n&&o?e.max-e.length:0),n||(e.max=o?e.min+e.length:t),e.min=(0,i.default)(e.min,0,t),e.max=(0,i.default)(e.max,0,t),e.length=e.max-e.min,e}function b(e,t,r){return Math.round(e+(0,i.default)(t-e,0,r)/2)}t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return new v(e,t,r).execute()};var i=r("../../deps/hammerhead"),a=r("../../deps/testcafe-core"),s=r("../../deps/testcafe-automation"),o=r("../../deps/testcafe-ui"),u=n(r("../../status")),l=n(r("./ensure-crop-options")),c=r("../../utils/ensure-elements"),d=n(r("../../utils/run-with-barriers")),f=n(r("../../../../test-run/client-messages")),h=n(r("../../../../test-run/commands/type")),m=r("../../../../test-run/commands/options");function n(e){return e&&e.__esModule?e:{default:e}}var p=i.eventSandbox.message,g="driver|browser-manipulation|request",E="driver|browser-manipulation|response";p.on(p.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===g){var e=a.domUtils.findIframeByWindow(t.source),r=t.message,n=r.command,o=r.cropDimensions;o&&(n.options=new m.ElementScreenshotOptions({crop:o,includePaddings:!1}));var i=new v(n);i.element=e,i.execute().then(function(e){return p.sendServiceMsg({cmd:E,result:e},t.source)})}});var v=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.element=null}return n.prototype._getAbsoluteCropValues=function(){var e=this.element.getBoundingClientRect(),t=e.top,r=e.left;r+=this.command.options.originOffset.x,t+=this.command.options.originOffset.y;var n=r+this.command.options.crop.right,o=t+this.command.options.crop.bottom;return{top:t+=this.command.options.crop.top,left:r+=this.command.options.crop.left,bottom:o,right:n}},n.prototype._createManipulationReadyMessage=function(){var e=window.devicePixelRatio||1,t={cmd:f.default.readyForBrowserManipulation,pageDimensions:{dpr:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight},disableResending:!0};return this.command.type===h.default.takeElementScreenshot&&(t.cropDimensions=this._getAbsoluteCropValues()),t},n.prototype._runScrollBeforeScreenshot=function(){var o=this;return i.Promise.resolve().then(function(){if(o.element||!o.command.selector)return i.Promise.resolve();var e=o.command.selector.timeout,t="number"==typeof e?e:o.globalSelectorTimeout;return o.statusBar.showWaitingElementStatus(t),(0,c.ensureElements)([(0,c.createElementDescriptor)(o.command.selector)],o.globalSelectorTimeout).then(function(e){o.statusBar.hideWaitingElementStatus(),o.element=e[0]}).catch(function(e){throw o.statusBar.hideWaitingElementStatus(),e})}).then(function(){(0,l.default)(o.element,o.command.options);var e=o.command.options,t=e.scrollTargetX,r=e.scrollTargetY,n=e.scrollToCenter;return new s.Scroll(o.element,new m.ScrollOptions({offsetX:t,offsetY:r,scrollToCenter:n,skipParentFrames:!0})).run()})},n.prototype._hideUI=function(){return(0,o.hide)(),this.command.markData&&(0,o.showScreenshotMark)(this.command.markData),(0,a.delay)(500)},n.prototype._showUI=function(){this.command.markData&&(0,o.hideScreenshotMark)(),(0,o.show)()},n.prototype._requestManipulation=function(){if(window.top===window)return i.transport.queuedAsyncServiceMsg(this._createManipulationReadyMessage());var e=this._getAbsoluteCropValues();return(0,a.sendRequestToFrame)({cmd:g,command:this.command,cropDimensions:e},E,window.parent).then(function(e){if(!e.result)return{result:null};var t=e.result,r=t.result,n=t.executionError;if(n)throw n;return{result:r}})},n.prototype._runManipulation=function(){var n=this,o=null;return i.Promise.resolve().then(function(){return n.command.type!==h.default.takeElementScreenshot?i.Promise.resolve():(a.scrollController.stopPropagation(),n._runScrollBeforeScreenshot())}).then(function(){return window.top===window?n._hideUI():i.Promise.resolve()}).then(function(){return n._requestManipulation()}).then(function(e){var t=e.result,r=e.error;if(r)throw r;return a.scrollController.enablePropagation(),o=t,window.top===window&&n._showUI(),(0,a.delay)(200)}).then(function(){return new u.default({isCommandResult:!0,result:o})}).catch(function(e){return a.scrollController.enablePropagation(),new u.default({isCommandResult:!0,executionError:e})})},n.prototype.execute=function(){var e=this;return(0,d.default)(function(){return e._runManipulation()}).barriersPromise},n}();t.exports=e.default}},"client-functions":{"client-function-executor.js":function(e,t,r){e.__esModule=!0;var n=r("../../deps/hammerhead"),o=u(r("../../status")),i=r("./replicator"),a=u(r("./eval-function")),s=r("../../../../errors/test-run");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.command=e,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,a.default)(this.command.fnCode,this.dependencies)}return t.prototype.getResult=function(){var t=this;return n.Promise.resolve().then(function(){var e=t.replicator.decode(t.command.args);return t._executeFn(e)}).catch(function(e){throw e.isTestCafeError||(e=new s.UncaughtErrorInClientFunctionCode(t.command.instantiationCallsiteName,e)),e})},t.prototype.getResultDriverStatus=function(){var t=this;return this.getResult().then(function(e){return new o.default({isCommandResult:!0,result:t.replicator.encode(e)})}).catch(function(e){return new o.default({isCommandResult:!0,executionError:e})})},t.prototype._createReplicator=function(){return(0,i.createReplicator)([new i.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new i.FunctionTransform])},t.prototype._executeFn=function(e){return this.fn.apply(window,e)},t}();e.default=l,t.exports=e.default},"eval-function.js":function(exports,module,require){exports.__esModule=!0,exports.default=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Promise=_hammerhead2.default.Promise;function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}module.exports=exports.default},"replicator.js":function(e,t,r){e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=function(e){return new n.default({serialize:d,deserialize:d}).addTransforms(e)};var n=u(r("replicator")),o=u(r("./eval-function")),i=r("./selector-executor/node-snapshots"),a=r("../../../../errors/test-run"),s=u(r("../../deps/hammerhead"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=window.Node,d=function(e){return e};e.FunctionTransform=function(){function e(){l(this,e),this.type="Function"}return e.prototype.shouldTransform=function(e){return"function"===e},e.prototype.toSerializable=function(){return""},e.prototype.fromSerializable=function(e){var t=e.fnCode,r=e.dependencies;return(0,o.default)(t,r)},e}(),e.SelectorNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.customDOMProperties=e||{}}return t.prototype._extend=function(e,r){var n=this;s.default.nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(t){try{e[t]=n.customDOMProperties[t](r)}catch(e){throw new a.UncaughtErrorInCustomDOMPropertyCode(n.instantiationCallsiteName,e,t)}})},t.prototype.shouldTransform=function(e,t){return t instanceof c},t.prototype.toSerializable=function(e){var t=1===e.nodeType?new i.ElementSnapshot(e):new i.NodeSnapshot(e);return this._extend(t,e),t},t}(),e.ClientFunctionNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.instantiationCallsiteName=e}return t.prototype.shouldTransform=function(e,t){if(t instanceof c)throw new a.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},t}()},"selector-executor":{"filter.js":function(e,t,r){var n,o=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r("../../../../../errors/test-run"),a=r("../../../utils/element-utils"),s=l(r("../../../deps/testcafe-core")),u=l(r("../../../deps/hammerhead"));function l(e){return e&&e.__esModule?e:{default:e}}var c=s.default.arrayUtils,d=u.default.utils.types,f=u.default.nativeMethods,h=1,m=2,p=3,g=((n={})[h]=/^\.filterVisible\(\)$/,n[m]=/^\.filterHidden\(\)$/,n[p]=/^\.nth\(\d+\)$/,n),E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.err=null}return e.prototype.filter=function(e,t,r){var n=c.filter(e,a.exists);if(t.filterVisible&&(n=n.filter(a.visible),this.assertFilterError(n,r,h)),t.filterHidden&&(n=n.filter(function(e){return!(0,a.visible)(e)}),this.assertFilterError(n,r,m)),t.counterMode)n=null!==t.index?this.getNodeByIndex(n,t.index)?1:0:n.length;else{if(t.collectionMode){if(null!==t.index){var o=this.getNodeByIndex(n,t.index);n=o?[o]:[]}}else n=this.getNodeByIndex(n,t.index||0);"number"==typeof t.index&&this.assertFilterError(n,r,p)}return n},e.prototype.cast=function(e){var t=null;if(d.isNullOrUndefined(e))t=[];else if(e instanceof Node)t=[e];else{if(!(0,a.IsNodeCollection)(e))throw new i.InvalidSelectorResultError;t=e}return t},e.prototype.assertFilterError=function(e,t,r){e&&0!==e.length||(this.error=this.getErrorItem(t,r))},e.prototype.getErrorItem=function(e,t){var r=e.apiFnChain,n=e.apiFnID;if(t)for(var o=n;o<r.length;o++)if(g[t].test(r[o]))return o;return null},e.prototype.getNodeByIndex=function(e,t){return t<0?e[e.length+t]:e[t]},o(e,[{key:"error",get:function(){return this.err},set:function(e){null===this.err&&(this.err=e)}}]),e}();f.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:new E,configurable:!0})},"index.js":function(e,t,r){e.__esModule=!0;var n,o=r("../../../deps/hammerhead"),c=r("../../../deps/testcafe-core"),i=r("../client-function-executor"),a=(n=i)&&n.__esModule?n:{default:n},d=r("../../../utils/element-utils"),f=r("../replicator");r("./filter");var s=function(u){function l(e,t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,e));if(i.createNotFoundError=n,i.createIsInvisibleError=o,i.timeout="number"==typeof e.timeout?e.timeout:t,i.counterMode=i.dependencies.filterOptions.counterMode,r){var a=new Date-r;i.timeout=Math.max(i.timeout-a,0)}var s=i.dependencies&&i.dependencies.customDOMProperties;return i.replicator.addTransforms([new f.SelectorNodeTransform(s)]),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,u),l.prototype._createReplicator=function(){return(0,f.createReplicator)([new f.FunctionTransform])},l.prototype._getTimeoutErrorParams=function(){var e=window["%testCafeSelectorFilter%"].error,t=this.command.apiFnChain;return void 0!==e?{apiFnIndex:e,apiFnChain:t}:null},l.prototype._validateElement=function(i,a){var s=this;return o.Promise.resolve().then(function(){return s.fn.apply(window,i)}).then(function(e){var t=(0,d.exists)(e),r=!s.command.visibilityCheck||(0,d.visible)(e),n=t?s.createIsInvisibleError:s.createNotFoundError,o=new Date-a>=s.timeout;if(t&&r)return e;if(!o)return(0,c.delay)(200).then(function(){return s._validateElement(i,a)});if(n)throw n(s._getTimeoutErrorParams());return null})},l.prototype._executeFn=function(e){if(this.counterMode)return u.prototype._executeFn.call(this,e);var t=new Date,r=null,n=null;return this._validateElement(e,t).catch(function(e){r=e}).then(function(e){if(r)throw r;n=e}).then(function(){return n})},l}(a.default);e.default=s,t.exports=e.default},"node-snapshots.js":function(e,t,r){e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var n=r("../../../deps/testcafe-core"),o=r("../../../../../client-functions/selectors/snapshot-properties");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={textContent:function(e){return e.textContent},childNodeCount:function(e){return e.childNodes.length},hasChildNodes:function(e){return!!a.childNodeCount(e)},childElementCount:function(e){var t=e.children;if(t)return t.length;for(var r=0,n=e.childNodes.length,o=0;o<n;o++)1===e.childNodes[o].nodeType&&r++;return r},hasChildElements:function(e){return!!a.childElementCount(e)}},s=e.NodeSnapshot=function(){function t(e){i(this,t),this._initializeProperties(e,o.NODE_SNAPSHOT_PROPERTIES,a)}return t.prototype._initializeProperties=function(e,t,r){for(var n=0;n<t.length;n++){var o=t[n],i=r[o];this[o]=i?i(e):e[o]}},t}(),u={tagName:function(e){return e.tagName.toLowerCase()},visible:n.positionUtils.isElementVisible,focused:function(e){return n.domUtils.getActiveElement()===e},attributes:function(e){for(var t=e.attributes,r={},n=t.length-1;0<=n;n--)r[t[n].name]=t[n].value;return r},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=e.className;return(t="string"==typeof t.animVal?t.animVal:t).replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},r=window.getComputedStyle(e),n=0;n<r.length;n++){var o=r[n];t[o]=r[o]}return t},innerText:function(e){return e.innerText}};e.ElementSnapshot=function(r){function n(e){i(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t._initializeProperties(e,o.ELEMENT_SNAPSHOT_PROPERTIES,u),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n}(s)}}},"execute-action.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r,n){return new h(e,t,r,n).execute()};var i=r("../deps/hammerhead"),n=r("../deps/testcafe-core"),a=r("../deps/testcafe-automation"),s=o(r("../status")),u=o(r("../utils/run-with-barriers")),l=r("../utils/ensure-elements"),c=r("../../../errors/test-run"),d=o(r("../../../test-run/commands/type"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!n.domUtils.isContentEditableElement(e))throw new c.ActionElementNonContentEditableError(t)}var h=function(){function o(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.testSpeed=n,this.elements=[],this.ensureElementsPromise=null,this.ensureElementsStartTime=null,this.executionStartTime=null,this.executionStartedHandler=null,this.commandSelectorTimeout=null}return o.prototype._getSpecificTimeout=function(){return this.command.selector&&"number"==typeof this.command.selector.timeout?this.command.selector.timeout:this.globalSelectorTimeout},o.prototype._delayAfterExecution=function(){return this.command.options&&1!==this.command.options.speed?(0,n.delay)(2e3*(1-this.command.options.speed)):i.Promise.resolve()},o.prototype._isExecutionTimeoutExpired=function(){return Date.now()-this.executionStartTime>=this.commandSelectorTimeout},o.prototype._ensureCommandArguments=function(){if(this.command.type===d.default.pressKey&&(0,n.parseKeySequence)(this.command.keys).error)throw new c.ActionIncorrectKeysError("keys")},o.prototype._ensureCommandElements=function(){var t=this,e=[];return this.command.selector&&e.push((0,l.createElementDescriptor)(this.command.selector)),this.command.type===d.default.dragToElement?e.push((0,l.createAdditionalElementDescriptor)(this.command.destinationSelector,"destinationSelector")):this.command.type===d.default.selectEditableContent&&(e.push((0,l.createAdditionalElementDescriptor)(this.command.startSelector,"startSelector")),e.push((0,l.createAdditionalElementDescriptor)(this.command.endSelector||this.command.startSelector,"endSelector"))),(0,l.ensureElements)(e,this.globalSelectorTimeout).then(function(e){t.elements=e})},o.prototype._ensureCommandElementsProperties=function(){this.command.type===d.default.selectText?function(e){if(!n.domUtils.isEditableElement(e))throw new c.ActionElementNonEditableError}(this.elements[0]):this.command.type===d.default.selectTextAreaContent?function(e){if(!n.domUtils.isTextAreaElement(e))throw new c.ActionElementNotTextAreaError}(this.elements[0]):this.command.type===d.default.selectEditableContent?(f(this.elements[0],"startSelector"),f(this.elements[1],"endSelector"),function(e){if(!n.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new c.ActionRootContainerNotFoundError}(this.elements)):this.command.type!==d.default.setFilesToUpload&&this.command.type!==d.default.clearUpload||function(e){if(!n.domUtils.isFileInput(e))throw new c.ActionElementIsNotFileInputError}(this.elements[0])},o.prototype._ensureCommandOptions=function(){var e,t,r,n,o;this.elements.length&&this.command.options&&"offsetX"in this.command.options&&"offsetY"in this.command.options&&(e=this.elements[0],t=this.command.options,r=(0,a.getOffsetOptions)(e,t.offsetX,t.offsetY),n=r.offsetX,o=r.offsetY,t.offsetX=n,t.offsetY=o)},o.prototype._createAutomation=function(){var e=null;switch(this.command.type){case d.default.click:return/option|optgroup/.test(n.domUtils.getTagName(this.elements[0]))?new a.SelectChildClick(this.elements[0],this.command.options):new a.Click(this.elements[0],this.command.options);case d.default.rightClick:return new a.RClick(this.elements[0],this.command.options);case d.default.doubleClick:return new a.DblClick(this.elements[0],this.command.options);case d.default.hover:return new a.Hover(this.elements[0],this.command.options);case d.default.drag:return new a.DragToOffset(this.elements[0],this.command.dragOffsetX,this.command.dragOffsetY,this.command.options);case d.default.dragToElement:return new a.DragToElement(this.elements[0],this.elements[1],this.command.options);case d.default.typeText:return new a.Type(this.elements[0],this.command.text,this.command.options);case d.default.selectText:case d.default.selectTextAreaContent:return e=(0,a.calculateSelectTextArguments)(this.elements[0],this.command),new a.SelectText(this.elements[0],e.startPos,e.endPos,this.command.options);case d.default.selectEditableContent:return new a.SelectEditableContent(this.elements[0],this.elements[1],this.command.options);case d.default.pressKey:return new a.Press((0,n.parseKeySequence)(this.command.keys).combinations,this.command.options);case d.default.setFilesToUpload:return new a.Upload(this.elements[0],this.command.filePath,function(e){return new c.ActionCanNotFindFileToUploadError(e)});case d.default.clearUpload:return new a.Upload(this.elements[0])}return null},o.prototype._runAction=function(t){var r=this;return this._ensureCommandElements().then(function(){return r._ensureCommandElementsProperties()}).then(function(){r._ensureCommandOptions();var e=r._createAutomation();return e.TARGET_ELEMENT_FOUND_EVENT?e.on(e.TARGET_ELEMENT_FOUND_EVENT,function(){r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()}):(r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()),e.run(t)})},o.prototype._runRecursively=function(){var t=this,e=!1,r=!0;return n.promiseUtils.whilst(function(){return!e},function(){return t._runAction(r).then(function(){e=!0}).catch(function(e){if(t._isExecutionTimeoutExpired()){if(e.message===a.ERROR_TYPES.foundElementIsNotTarget)return r=!1,i.Promise.resolve();throw e.message===a.ERROR_TYPES.elementIsInvisibleError?new c.ActionElementIsInvisibleError:e}return(0,n.delay)(250)})})},o.prototype.execute=function(){var o=this;return this.command.options&&!this.command.options.speed&&(this.command.options.speed=this.testSpeed),{startPromise:new i.Promise(function(e){o.executionStartedHandler=e}),completionPromise:new i.Promise(function(t){o.executionStartTime=new Date;try{o._ensureCommandArguments()}catch(e){return void t(new s.default({isCommandResult:!0,executionError:e}))}o.commandSelectorTimeout=o._getSpecificTimeout(),o.statusBar.showWaitingElementStatus(o.commandSelectorTimeout);var e=(0,u.default)(function(){return o._runRecursively()}),r=e.actionPromise,n=e.barriersPromise;r.then(function(){return i.Promise.all([o._delayAfterExecution(),n])}).then(function(){return t(new s.default({isCommandResult:!0}))}).catch(function(e){return o.statusBar.hideWaitingElementStatus(!1).then(function(){return t(new s.default({isCommandResult:!0,executionError:e}))})})})}},o}();t.exports=e.default},"execute-navigate-to.js":function(e,t,r){e.__esModule=!0,e.default=function(t){var e=u.url.getNavigationUrl(t.url,window),r=n.default.Promise.resolve();e&&o.browser.isRetryingTestPagesEnabled()&&(r=o.browser.fetchPageToCache(e,s));return r.then(function(){var e=new o.RequestBarrier;return n.default.navigateTo(t.url),n.default.Promise.all([e.wait(),o.pageUnloadBarrier.wait()])}).then(function(){return new i.default({isCommandResult:!0})}).catch(function(e){return new i.default({isCommandResult:!0,executionError:e})})};var n=a(r("../deps/hammerhead")),o=r("../deps/testcafe-core"),i=a(r("../status"));function a(e){return e&&e.__esModule?e:{default:e}}var s=n.default.createNativeXHR,u=n.default.utils;t.exports=e.default},"execute-selector.js":function(e,t,r){e.__esModule=!0,e.getResult=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})}).catch(function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})},e.getResultDriverStatus=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})};var n,o=r("./client-functions/selector-executor"),s=(n=o)&&n.__esModule?n:{default:n}}},deps:{"hammerhead.js":function(e,t,r){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default},"testcafe-automation.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeAutomation%"],t.exports=e.default},"testcafe-core.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}},"driver-link":{"child.js":function(e,t,r){e.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=r("../deps/hammerhead"),i=r("../deps/testcafe-core"),a=r("../../../errors/test-run"),s=c(r("./send-message-to-driver")),u=r("./messages"),l=c(r("../status"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.driverWindow=e,this.driverIframe=i.domUtils.findIframeByWindow(e),this.driverId=t,this.iframeAvailabilityTimeout=0}return r.prototype._ensureIframe=function(){var e=this;return i.domUtils.isElementInDocument(this.driverIframe)?(0,i.waitFor)(function(){return i.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},200,this.iframeAvailabilityTimeout).catch(function(){throw new a.CurrentIframeIsInvisibleError}):o.Promise.reject(new a.CurrentIframeNotFoundError)},r.prototype._waitForIframeRemovedOrHidden=function(){var t=this;return new o.Promise(function(e){t.checkIframeInterval=o.nativeMethods.setInterval.call(window,function(){t._ensureIframe().catch(function(){return(0,i.delay)(500).then(function(){return e(new l.default({isCommandResult:!0}))})})},1e3)})},r.prototype._waitForCommandResult=function(){var t=this,r=null;return o.Promise.race([this._waitForIframeRemovedOrHidden(),new o.Promise(function(t){r=function(e){e.message.type===u.TYPE.commandExecuted&&t(e.message.driverStatus)},o.eventSandbox.message.on(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r)})]).then(function(e){return o.eventSandbox.message.off(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r),o.nativeMethods.clearInterval.call(window,t.checkIframeInterval),e})},r.prototype.confirmConnectionEstablished=function(e){var t=new u.ConfirmationMessage(e,{id:this.driverId});o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},r.prototype.executeCommand=function(t,r){var n=this;return this._ensureIframe().then(function(){var e=new u.ExecuteCommandMessage(t,r);return o.Promise.all([(0,s.default)(e,n.driverWindow,n.iframeAvailabilityTimeout,a.CurrentIframeIsNotLoadedError),n._waitForCommandResult()])}).then(function(e){return e[1]})},n(r,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),r}();e.default=d,t.exports=e.default},"messages.js":function(e,t,r){e.__esModule=!0,e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var n,o=r("../generate-id"),i=(n=o)&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler"},c=function e(t){u(this,e),this.type=t,this.id=(0,i.default)()};e.EstablishConnectionMessage=function(e){function t(){return u(this,t),a(this,e.call(this,l.establishConnection))}return s(t,e),t}(c),e.CommandExecutedMessage=function(r){function n(e){u(this,n);var t=a(this,r.call(this,l.commandExecuted));return t.driverStatus=e,t}return s(n,r),n}(c),e.ExecuteCommandMessage=function(n){function o(e,t){u(this,o);var r=a(this,n.call(this,l.executeCommand));return r.command=e,r.testSpeed=t,r}return s(o,n),o}(c),e.ConfirmationMessage=function(n){function o(e,t){u(this,o);var r=a(this,n.call(this,l.confirmation));return r.requestMessageId=e,r.result=t,r}return s(o,n),o}(c),e.SetNativeDialogHandlerMessage=function(r){function n(e){u(this,n);var t=a(this,r.call(this,l.setNativeDialogHandler));return t.dialogHandler=e,t}return s(n,r),n}(c)},"parent.js":function(e,t,r){e.__esModule=!0;var n,o=r("../deps/hammerhead"),i=r("./messages"),a=r("../../../errors/test-run"),s=r("./send-message-to-driver"),u=(n=s)&&n.__esModule?n:{default:n};var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.driverWindow=e}return t.prototype.establishConnection=function(){var e=new i.EstablishConnectionMessage;return(0,u.default)(e,this.driverWindow,5e3,a.CurrentIframeIsNotLoadedError).then(function(e){return e.result.id})},t.prototype.confirmMessageReceived=function(e){var t=new i.ConfirmationMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},t.prototype.onCommandExecuted=function(e){var t=new i.CommandExecutedMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},t}();e.default=l,t.exports=e.default},"send-message-to-driver.js":function(e,t,r){e.__esModule=!0,e.default=function(r,e,t,n){var o=null,i=null;t=Math.max(t||0,l);return a.Promise.race([(0,s.delay)(t),new a.Promise(function(t){i=function(e){e.message.type===u.TYPE.confirmation&&e.message.requestMessageId===r.id&&t(e.message)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),o=a.nativeMethods.setInterval.call(window,function(){return a.eventSandbox.message.sendServiceMsg(r,e)},c),a.eventSandbox.message.sendServiceMsg(r,e)})]).then(function(e){if(a.nativeMethods.clearInterval.call(window,o),a.nativeMethods.clearTimeout.call(window,null),a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),!e)throw new n;return e})};var a=r("../deps/hammerhead"),s=r("../deps/testcafe-core"),u=r("./messages"),l=2500,c=1e3;t.exports=e.default}},"driver.js":function(e,t,r){e.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=i(r("./deps/hammerhead")),s=r("./deps/testcafe-core"),o=r("./deps/testcafe-ui"),u=i(r("../../test-run/client-messages")),l=i(r("../../test-run/commands/type")),c=r("../../test-run/commands/utils"),d=r("../../errors/test-run"),f=i(r("../../test-run/browser-console-messages")),h=i(r("./native-dialog-tracker")),m=r("./driver-link/messages"),p=i(r("./storage")),g=i(r("./status")),E=i(r("./generate-id")),v=i(r("./driver-link/child")),y=i(r("./command-executors/execute-action")),w=i(r("./command-executors/browser-manipulation")),_=i(r("./command-executors/execute-navigate-to")),S=r("./command-executors/execute-selector"),b=i(r("./command-executors/client-functions/client-function-executor"));function i(e){return e&&e.__esModule?e:{default:e}}var C=a.default.transport,I=a.default.Promise,T=a.default.eventSandbox.message,x=a.default.storages,A=a.default.nativeMethods,N=A.date,M="testcafe|driver|test-done-sent-flag",O="testcafe|driver|pending-status",R="testcafe|driver|executing-client-function-descriptor",D="testcafe|driver|selector-execution-start-time",P="testcafe|driver|pending-page-error",F="testcafe|driver|active-iframe-selector",U="testcafe|driver|test-speed",k="testcafe|driver|assertion-retries-timeout",j="testcafe|driver|assertion-retries-start-time",H="testcafe|driver|console-messages",B={NotLoadedError:d.ActionIframeIsNotLoadedError,NotFoundError:d.ActionElementNotFoundError,IsInvisibleError:d.ActionElementIsInvisibleError},L={NotLoadedError:d.CurrentIframeIsNotLoadedError,NotFoundError:d.CurrentIframeNotFoundError,IsInvisibleError:d.CurrentIframeIsInvisibleError},W=function(){function i(e,t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",this.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",this.testRunId=e,this.heartbeatUrl=t.heartbeat,this.browserStatusUrl=t.status,this.browserStatusDoneUrl=t.statusDone,this.userAgent=r.userAgent,this.fixtureName=r.fixtureName,this.testName=r.testName,this.selectorTimeout=n.selectorTimeout,this.pageLoadTimeout=n.pageLoadTimeout,this.initialSpeed=n.speed,this.skipJsErrors=n.skipJsErrors,this.dialogHandler=n.dialogHandler,this.customCommandHandlers={},this.contextStorage=null,this.nativeDialogsTracker=null,this.childDriverLinks=[],this.activeChildDriverLink=null,this.statusBar=null,n.retryTestPages&&s.browser.enableRetryingTestPages(),this.pageInitialRequestBarrier=new s.RequestBarrier,this.readyPromise=s.eventUtils.documentReady(this.pageLoadTimeout).then(function(){return o.pageInitialRequestBarrier.wait(!0)}),this._initChildDriverListening(),s.pageUnloadBarrier.init(),(0,s.preventRealEvents)(),a.default.on(a.default.EVENTS.uncaughtJsError,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.unhandledRejection,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.consoleMethCalled,function(e){return o._onConsoleMessage(e)})}return i.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(M))return I.resolve();var t=new d.UncaughtErrorOnPage(e.stack,e.pageUrl);return this.contextStorage.getItem(P)||this.contextStorage.setItem(P,t),null},i.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(R);return!!e&&(this._onReady(new g.default({isCommandResult:!0,executionError:new d.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},i.prototype._onConsoleMessage=function(e){var t=e.meth,r=e.line,n=this.consoleMessages;n.addMessage(t,r),this.consoleMessages=n},i.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(P);t&&(this.contextStorage.setItem(P,null),e.pageError=t)},i.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},i.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},i.prototype._sendStatusRequest=function(e){for(var t={cmd:u.default.ready,status:e,disableResending:!0,allowRejecting:!0},r=function(){return(0,s.getTimeLimitedPromise)(C.asyncServiceMsg(t),5e3)},n=function(){return(0,s.delay)(300).then(r)},o=r(),i=0;i<5;i++)o=o.catch(n);return o},i.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e)),this.contextStorage.setItem(O,e);var r=null;return s.pageUnloadBarrier.wait(0).then(function(){return t._sendStatusRequest(e)}).then(function(e){return r=e,s.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(O,null),r})},i.prototype._initChildDriverListening=function(){var i=this;T.on(T.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,r=e.source;if(t.type===m.TYPE.establishConnection){var n=i._getChildDriverLinkByWindow(r);if(!n){var o=i.testRunId+"-"+(0,E.default)();n=new v.default(r,o),i.childDriverLinks.push(n)}n.confirmConnectionEstablished(t.id)}})},i.prototype._getChildDriverLinkByWindow=function(t){return this.childDriverLinks.filter(function(e){return e.driverWindow===t})[0]},i.prototype._runInActiveIframe=function(e){var t=this,r=I.resolve(),n=this.contextStorage.getItem(F);!this.activeChildDriverLink&&n&&(r=this._switchToIframe(n,L)),r.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)}).catch(function(e){return t._onCommandExecutedInIframe(new g.default({isCommandResult:!0,executionError:e}))})},i.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},i.prototype._ensureChildDriverLink=function(e,t,r){var n=this;return(0,s.waitFor)(function(){return n._getChildDriverLinkByWindow(e)},500,r).catch(function(){throw new t})},i.prototype._switchToIframe=function(t,r){var n=this,o="number"==typeof t.timeout?t.timeout:this.selectorTimeout;return(0,S.getResult)(t,o,null,function(e){return new r.NotFoundError(e)},function(){return r.IsInvisibleError()},this.statusBar).then(function(e){if(!s.domUtils.isIframeElement(e))throw new d.ActionElementNotIframeError;return n._ensureChildDriverLink(A.contentWindowGetter.call(e),r.NotLoadedError,o)}).then(function(e){e.availabilityTimeout=o,n.activeChildDriverLink=e,n.contextStorage.setItem(F,t)})},i.prototype._switchToMainWindow=function(e){this.activeChildDriverLink&&this.activeChildDriverLink.executeCommand(e),this.contextStorage.setItem(F,null),this.activeChildDriverLink=null},i.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new m.SetNativeDialogHandlerMessage(e),r=0;r<this.childDriverLinks.length;r++)T.sendServiceMsg(t,this.childDriverLinks[r].driverWindow)},i.prototype._onActionCommand=function(e){var t=this,r=(0,y.default)(e,this.selectorTimeout,this.statusBar,this.speed),n=r.startPromise,o=r.completionPromise;n.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},i.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,_.default)(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(R,{instantiationCallsiteName:e.instantiationCallsiteName}),new b.default(e).getResultDriverStatus().then(function(e){t.contextStorage.setItem(R,null),t._onReady(e)})},i.prototype._onExecuteSelectorCommand=function(e){var t=this,r=this.contextStorage.getItem(D)||new N,n=e.needError?function(e){return new d.CantObtainInfoForElementSpecifiedBySelectorError(null,e)}:null;(0,S.getResultDriverStatus)(e,this.selectorTimeout,r,n,n,this.statusBar).then(function(e){t.contextStorage.setItem(D,null),t._onReady(e)})},i.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,B).then(function(){return t._onReady(new g.default({isCommandResult:!0}))}).catch(function(e){return t._onReady(new g.default({isCommandResult:!0,executionError:e}))})},i.prototype._onBrowserManipulationCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,w.default)(e,this.selectorTimeout,this.statusBar).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new g.default({isCommandResult:!0,result:e}))})},i.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(k,e.timeout),this.contextStorage.setItem(j,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new g.default({isCommandResult:!0}))},i.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(k,null),this.contextStorage.setItem(j,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new g.default({isCommandResult:!0}))})},i.prototype._checkStatus=function(){var n=this;return s.browser.checkStatus(this.browserStatusDoneUrl,a.default.createNativeXHR,{manualRedirect:!0}).then(function(e){var t=e.command,r=e.redirecting;r&&t.url.indexOf(n.testRunId)<0?(x.clear(),x.lock()):n.contextStorage.setItem(M,!1),r?s.browser.redirect(t):n._onReady({isCommandResult:!1})}).catch(function(){return(0,s.delay)(1e3)})},i.prototype._onCustomCommand=function(e){var t=this;(0,this.customCommandHandlers[e.type].handler)(e).then(function(e){t._onReady(new g.default({isCommandResult:!0,result:e}))})},i.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(M,!0),this._sendStatus(e).then(function(){return t._checkStatus()})},i.prototype._onBackupStoragesCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:x.backup()}))},i.prototype._onReady=function(e){var t=this;this._sendStatus(e).then(function(e){e?t._onCommand(e):t._onReady(new g.default)})},i.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===l.default.testDone?this._onTestDone(new g.default({isCommandResult:!0})):e.type===l.default.setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===l.default.switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===l.default.switchToIframe?this._onSwitchToIframeCommand(e):(0,c.isBrowserManipulationCommand)(e)?this._onBrowserManipulationCommand(e):e.type===l.default.executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===l.default.executeSelector?this._onExecuteSelectorCommand(e):e.type===l.default.navigateTo?this._onNavigateToCommand(e):e.type===l.default.setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===l.default.getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===l.default.getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===l.default.setTestSpeed?this._onSetTestSpeedCommand(e):e.type===l.default.showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===l.default.hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===l.default.backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},i.prototype._isExecutableInTopWindowOnly=function(e){if((0,c.isExecutableInTopWindowOnly)(e))return!0;var t=this.customCommandHandlers[e.type];return t&&t.isExecutableInTopWindowOnly},i.prototype._onCommand=function(r){var n=this;this.readyPromise.then(function(){var e=(0,c.isCommandRejectableByPageError)(r);if(n.contextStorage.getItem(P)&&e)n._onReady(new g.default({isCommandResult:!0}));else{var t=n.activeChildDriverLink||n.contextStorage.getItem(F);n._isExecutableInTopWindowOnly(r)||!t?n._executeCommand(r):n._runInActiveIframe(r)}})},i.prototype.setCustomCommandHandlers=function(e,t,r){this.customCommandHandlers[e]={isExecutableInTopWindowOnly:r,handler:t}},i.prototype.start=function(){var r=this;this.contextStorage=new p.default(window,this.testRunId),this.nativeDialogsTracker=new h.default(this.contextStorage,this.dialogHandler),this.speed||(this.speed=this.initialSpeed),s.browser.startHeartbeat(this.heartbeatUrl,a.default.createNativeXHR),this.statusBar=new o.StatusBar(this.userAgent,this.fixtureName,this.testName),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,s.disableRealEventsPreventing),this.readyPromise.then(function(){r.statusBar.hidePageLoadingStatus();var e=r.contextStorage.getItem(k);if(e){var t=r.contextStorage.getItem(j);0<e-(new Date-t)&&r.statusBar.showWaitingAssertionRetriesStatus(e,t)}});var e=this.contextStorage.getItem(O);if(e&&(e.resent=!0),this.contextStorage.getItem(M))e?this._onTestDone(e):this._checkStatus();else if(!this._failIfClientCodeExecutionIsInterrupted()){var t=this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)||this.contextStorage.getItem(this.EXECUTING_IN_IFRAME_FLAG),n=e||new g.default({isCommandResult:t});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(n)}},n(i,[{key:"speed",set:function(e){this.contextStorage.setItem(U,e)},get:function(){return this.contextStorage.getItem(U)}},{key:"consoleMessages",get:function(){return new f.default(this.contextStorage.getItem(H))},set:function(e){return this.contextStorage.setItem(H,e?e.getCopy():null)}}]),i}();e.default=W,t.exports=e.default},"embedding-utils.js":function(e,t,r){e.__esModule=!0;var n,o=r("./command-executors/client-functions/selector-executor/node-snapshots"),i=r("./command-executors/client-functions/selector-executor"),a=(n=i)&&n.__esModule?n:{default:n};e.default={NodeSnapshot:o.NodeSnapshot,ElementSnapshot:o.ElementSnapshot,SelectorExecutor:a.default},t.exports=e.default},"generate-id.js":function(e,t,r){e.__esModule=!0,e.default=function(){return"function"==typeof n.nativeMethods.performanceNow?n.nativeMethods.performanceNow().toString():(n.nativeMethods.dateNow()+Math.random()).toString()};var n=r("./deps/hammerhead");t.exports=e.default},"iframe-driver.js":function(e,t,r){e.__esModule=!0;var i=r("./deps/hammerhead"),a=r("./deps/testcafe-core"),s=r("./deps/testcafe-ui"),n=o(r("./driver")),u=o(r("./storage")),l=o(r("./status")),c=o(r("./driver-link/parent")),d=r("./driver-link/messages"),f=o(r("./native-dialog-tracker/iframe"));function o(e){return e&&e.__esModule?e:{default:e}}var h=function(n){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,{},{},t));return r.lastParentDriverMessageId=null,r.parentDriverLink=new c.default(window.parent),r._initParentDriverListening(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype._onJsError=function(){},o.prototype._onConsoleMessage=function(){},o.prototype._initParentDriverListening=function(){var r=this;i.eventSandbox.message.on(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;a.pageUnloadBarrier.wait(0).then(function(){if(t.type===d.TYPE.executeCommand){if(r.lastParentDriverMessageId===t.id)return;r.lastParentDriverMessageId=t.id,r.readyPromise.then(function(){r.speed=t.testSpeed,r.parentDriverLink.confirmMessageReceived(t.id),r._onCommand(t.command)})}t.type===d.TYPE.setNativeDialogHandler&&(r.nativeDialogsTracker.setHandler(t.dialogHandler),r._setNativeDialogHandlerInIframes(t.dialogHandler))})})},o.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},o.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},o.prototype.start=function(){var t=this;this.nativeDialogsTracker=new f.default(this.dialogHandler),this.statusBar=new s.IframeStatusBar;var e=this.parentDriverLink.establishConnection().then(function(e){(t.contextStorage=new u.default(window,e),t._failIfClientCodeExecutionIsInterrupted())||(t.contextStorage.getItem(t.COMMAND_EXECUTING_FLAG)||t.contextStorage.getItem(t.EXECUTING_IN_IFRAME_FLAG))&&(t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!1),t._onReady(new l.default({isCommandResult:!0})))});this.readyPromise=i.Promise.all([this.readyPromise,e])},o}(n.default);e.default=h,t.exports=e.default},"index.js":function(e,t,r){var n=u(r("./deps/hammerhead")),o=u(r("./driver")),i=u(r("./iframe-driver")),a=u(r("./script-execution-barrier")),s=u(r("./embedding-utils"));function u(e){return e&&e.__esModule?e:{default:e}}var l=n.default.nativeMethods,c=n.default.EVENTS.evalIframeScript;l.objectDefineProperty(window,"%testCafeDriver%",{configurable:!0,value:o.default}),l.objectDefineProperty(window,"%testCafeIframeDriver%",{configurable:!0,value:i.default}),l.objectDefineProperty(window,"%ScriptExecutionBarrier%",{configurable:!0,value:a.default}),l.objectDefineProperty(window,"%testCafeEmbeddingUtils%",{configurable:!0,value:s.default}),n.default.on(c,function(e){return initTestCafeClientDrivers(l.contentWindowGetter.call(e.iframe),!0)})},"native-dialog-tracker":{"iframe.js":function(e,t,r){e.__esModule=!0;var n=a(r("../deps/hammerhead")),o=a(r("./messages")),i=a(r("./index"));function a(e){return e&&e.__esModule?e:{default:e}}var s=n.default.eventSandbox.message,u=function(t){function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,null,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype._defaultDialogHandler=function(e){s.sendServiceMsg({type:o.default.unexpectedDialog,dialogType:e,url:i.default._getPageUrl()},window.top)},r.prototype._addAppearedDialogs=function(e,t){s.sendServiceMsg({type:o.default.appearedDialog,dialogType:e,text:t,url:i.default._getPageUrl()},window.top)},r.prototype._onHandlerError=function(e,t){s.sendServiceMsg({type:o.default.handlerError,dialogType:e,message:t,url:i.default._getPageUrl()},window.top)},r}(i.default);e.default=u,t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=a(r("../deps/hammerhead")),i=r("../../../errors/test-run"),s=a(r("../command-executors/client-functions/client-function-executor")),u=a(r("./messages"));function a(e){return e&&e.__esModule?e:{default:e}}var l=o.default.eventSandbox.message,c=o.default.processScript,d=o.default.nativeMethods,f="testcafe|native-dialog-tracker|appeared-dialogs",h="testcafe|native-dialog-tracker|unexpected-dialog",m="testcafe|native-dialog-tracker|error-in-handler",p=c("window.location.href"),g=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.contextStorage=e,this.dialogHandler=t,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(t)}return a._getPageUrl=function(){return d.eval(p)},a.prototype._initListening=function(){var r=this;l.on(l.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.type===u.default.appearedDialog?r._addAppearedDialogs(t.dialogType,t.text,t.url):t.type!==u.default.unexpectedDialog||r.unexpectedDialog?t.type!==u.default.handlerError||r.handlerError||r._onHandlerError(t.dialogType,t.message,t.url):r.unexpectedDialog={type:t.dialogType,url:t.url}})},a.prototype._init=function(){var t=this;o.default.on(o.default.EVENTS.beforeUnload,function(e){e.prevented&&!e.isFakeIEEvent&&(t.dialogHandler?t._createDialogHandler("beforeunload")(e.returnValue||""):t._defaultDialogHandler("beforeunload"));t.contextStorage&&t.contextStorage.save()}),window.alert=function(){return t._defaultDialogHandler("alert")},window.confirm=function(){return t._defaultDialogHandler("confirm")},window.prompt=function(){return t._defaultDialogHandler("prompt")}},a.prototype._createDialogHandler=function(o){var i=this;return function(e){var t=a._getPageUrl();i._addAppearedDialogs(o,e,t);var r=new s.default(i.dialogHandler),n=null;try{n=r.fn.apply(window,[o,e,t])}catch(e){i._onHandlerError(o,e.message||String(e),t)}return n}},a.prototype._defaultDialogHandler=function(e){var t=a._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:e,url:t}},a.prototype._addAppearedDialogs=function(e,t,r){this.appearedDialogs.splice(0,0,{type:e,text:t,url:r})},a.prototype._onHandlerError=function(e,t,r){this.handlerError=this.handlerError||{type:e,message:t,url:r}},a.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},a.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new i.NativeDialogNotHandledError(e.type,e.url):t?new i.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},n(a,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(f);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(f,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(h)},set:function(e){this.contextStorage.setItem(h,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(m)},set:function(e){this.contextStorage.setItem(m,e)}}]),a}();e.default=g,t.exports=e.default},"messages.js":function(e,t,r){e.__esModule=!0,e.default={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e.default}},"script-execution-barrier.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./deps/testcafe-core");var s=i.default.Promise,u=i.default.nativeMethods,l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},i.default.on(i.default.EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}return e.prototype._onScriptElementAdded=function(t){var r=this,e=u.scriptSrcGetter.call(t);if(void 0!==e&&""!==e){this.scriptsCount++;var n=null,o=function e(){u.removeEventListener.call(t,"load",e),u.removeEventListener.call(t,"error",e),u.clearTimeout.call(window,n),r._onScriptLoadedOrFailed()};u.addEventListener.call(t,"load",o),u.addEventListener.call(t,"error",o),n=u.setTimeout.call(window,o,this.SCRIPT_LOADING_TIMEOUT)}},e.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,a.delay)(25).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},e.prototype.wait=function(){var r=this;return new s(function(e){var t=function(){u.clearTimeout.call(window,r.watchdog),i.default.off(i.default.EVENTS.scriptElementAdded,r.scriptElementAddedHandler),r.watchdog=null,r.resolveWaitingPromise=null,e()};r.scriptsCount?(r.watchdog=u.setTimeout.call(window,function(){return t()},r.BARRIER_TIMEOUT),r.resolveWaitingPromise=function(){return t()}):t()})},e}();e.default=l,t.exports=e.default},"status.js":function(e,t,r){e.__esModule=!0;var n=i(r("../../utils/assignable")),o=i(r("./generate-id"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.id=(0,o.default)(),t.isCommandResult=!1,t.executionError=null,t.pageError=null,t.resent=!1,t.result=null,t.consoleMessages=null,t._assignFrom(e,!0),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"}]},n}(n.default);e.default=a,t.exports=e.default},"storage.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n};var a=i.default.json,s=i.default.nativeMethods,u=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.storage=s.winSessionStorageGetter.call(e),this.storageKey="testcafe|driver|"+t,this.data={},this._loadFromStorage()}return r.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=a.parse(e),this.storage.removeItem(this.storageKey))},r.prototype.save=function(){this.storage.setItem(this.storageKey,a.stringify(this.data))},r.prototype.setItem=function(e,t){this.data[e]=t,this.save()},r.prototype.getItem=function(e){return this.data[e]},r.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},r}();e.default=u,t.exports=e.default},utils:{"element-utils.js":function(e,t,r){e.__esModule=!0,e.exists=function(e){return!!e},e.visible=function(e){return!(!n.domUtils.isDomElement(e)&&!n.domUtils.isTextNode(e))&&(n.domUtils.isOptionElement(e)||"optgroup"===n.domUtils.getTagName(e)?o.selectElement.isOptionElementVisible(e):n.positionUtils.isElementVisible(e))},e.IsNodeCollection=function(e){return e instanceof s||e instanceof u||function(e){if(!i(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof a))return!1;return!0}(e)};var n=r("../deps/testcafe-core"),o=r("../deps/testcafe-ui"),i=Array.isArray,a=window.Node,s=window.HTMLCollection,u=window.NodeList},"ensure-elements.js":function(e,t,r){e.__esModule=!0,e.ensureElements=function(e,t){return new l(e,t).getElements()},e.createElementDescriptor=function(e){return{selector:e,createNotFoundError:function(e){return new u.ActionElementNotFoundError(e)},createIsInvisibleError:function(){return new u.ActionElementIsInvisibleError},createHasWrongNodeTypeError:function(e){return new u.ActionSelectorMatchesWrongNodeTypeError(e)}}},e.createAdditionalElementDescriptor=function(e,t){return{selector:e,createNotFoundError:function(e){return new u.ActionAdditionalElementNotFoundError(t,e)},createIsInvisibleError:function(){return new u.ActionAdditionalElementIsInvisibleError(t)},createHasWrongNodeTypeError:function(e){return new u.ActionAdditionalSelectorMatchesWrongNodeTypeError(t,e)}}};var n,o=r("../deps/hammerhead"),a=r("../deps/testcafe-core"),i=r("../command-executors/client-functions/selector-executor"),s=(n=i)&&n.__esModule?n:{default:n},u=r("../../../errors/test-run");var l=function(){function n(e,t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.elements=[],this.globalSelectorTimeout=t,this.ensureElementsPromise=o.Promise.resolve(),this.ensureElementsStartTime=new Date,e.forEach(function(e){return r._ensureElement(e)})}return n.prototype._ensureElement=function(e){var t=this,r=e.selector,n=e.createNotFoundError,o=e.createIsInvisibleError,i=e.createHasWrongNodeTypeError;this.ensureElementsPromise=this.ensureElementsPromise.then(function(){return new s.default(r,t.globalSelectorTimeout,t.ensureElementsStartTime,n,o).getResult()}).then(function(e){if(!a.domUtils.isDomElement(e))throw i(a.NODE_TYPE_DESCRIPTIONS[e.nodeType]);t.elements.push(e)})},n.prototype.getElements=function(){var e=this;return this.ensureElementsPromise.then(function(){return e.elements})},n}()},"run-with-barriers.js":function(e,t,r){e.__esModule=!0,e.default=function(e){var t=new c.RequestBarrier,r=new d.default;c.pageUnloadBarrier.watchForPageNavigationTriggers();for(var n=null,o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,i),u=s.then(function(e){return n=e,l.Promise.all([t.wait().then(function(){return r.wait()}),c.pageUnloadBarrier.wait()])}).then(function(){return n});return{actionPromise:s,barriersPromise:u}};var n,l=r("../deps/hammerhead"),c=r("../deps/testcafe-core"),o=r("../script-execution-barrier"),d=(n=o)&&n.__esModule?n:{default:n};t.exports=e.default}}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,r){e.__esModule=!0;var n=e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],o=e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"];e.SNAPSHOT_PROPERTIES=n.concat(o)}}},errors:{"test-run":{"index.js":function(e,t,r){e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCanNotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CantObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var n,o=r("./type"),s=(n=o)&&n.__esModule?n:{default:n};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){c(this,e),this.type=t,this.isTestCafeError=!0,this.callsite=null},a=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,e));return n.optionName=t,n.actualValue=r,n}return l(i,o),i}(i),d=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,e));return n.argumentName=t,n.actualValue=r,n}return l(i,o),i}(i),f=(e.MissingAwaitError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.missingAwaitError));return t.callsite=e,t}return l(n,r),n}(i),e.ClientFunctionExecutionInterruptionError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}return l(n,r),n}(i),e.DomNodeClientFunctionResultError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}return l(n,r),n}(i),function(i){function a(e,t){var r=t.apiFnChain,n=t.apiFnIndex;c(this,a);var o=u(this,i.call(this,e));return o.apiFnChain=r,o.apiFnIndex=n,o}return l(a,i),a}(i));e.InvalidSelectorResultError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.invalidSelectorResultError))}return l(t,e),t}(i),e.CantObtainInfoForElementSpecifiedBySelectorError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.cantObtainInfoForElementSpecifiedBySelectorError,t));return r.callsite=e,r}return l(o,n),o}(f),e.PageLoadError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.pageLoadError));return t.errMsg=e,t}return l(n,r),n}(i),e.UncaughtErrorOnPage=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.uncaughtErrorOnPage));return r.errStack=e,r.pageDestUrl=t,r}return l(o,n),o}(i),e.UncaughtErrorInTestCode=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.uncaughtErrorInTestCode));return r.errMsg=String(e),r.callsite=t,r}return l(o,n),o}(i),e.UncaughtNonErrorObjectInTestCode=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}return l(n,r),n}(i),e.UncaughtErrorInClientFunctionCode=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.uncaughtErrorInClientFunctionCode));return r.errMsg=String(t),r.instantiationCallsiteName=e,r}return l(o,n),o}(i),e.UncaughtErrorInCustomDOMPropertyCode=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,s.default.uncaughtErrorInCustomDOMPropertyCode,t,r));return n.errMsg=String(t),n.property=r,n.instantiationCallsiteName=e,n}return l(i,o),i}(i),e.UnhandledPromiseRejectionError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.unhandledPromiseRejection));return t.errMsg=String(e),t}return l(n,r),n}(i),e.UncaughtExceptionError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.uncaughtException));return t.errMsg=String(e),t}return l(n,r),n}(i),e.ExternalAssertionLibraryError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.externalAssertionLibraryError));return r.errMsg=String(e),r.callsite=t,r}return l(o,n),o}(i),e.AssertionExecutableArgumentError=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,s.default.assertionExecutableArgumentError,e,t));return n.errMsg=r,n}return l(i,o),i}(d),e.AssertionWithoutMethodCallError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.assertionWithoutMethodCallError));return t.callsite=e,t}return l(n,r),n}(i),e.AssertionUnawaitedPromiseError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.assertionUnawaitedPromiseError));return t.callsite=e,t}return l(n,r),n}(i),e.ActionIntegerOptionError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionIntegerOptionError,e,t))}return l(n,r),n}(a),e.ActionPositiveIntegerOptionError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionPositiveIntegerOptionError,e,t))}return l(n,r),n}(a),e.ActionBooleanOptionError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionBooleanOptionError,e,t))}return l(n,r),n}(a),e.ActionBooleanArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionBooleanArgumentError,e,t))}return l(n,r),n}(d),e.ActionSpeedOptionError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionSpeedOptionError,e,t))}return l(n,r),n}(a),e.ActionOptionsTypeError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionOptionsTypeError));return t.actualType=e,t}return l(n,r),n}(i),e.ActionStringArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionStringArgumentError,e,t))}return l(n,r),n}(d),e.ActionNullableStringArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionNullableStringArgumentError,e,t))}return l(n,r),n}(d),e.ActionIntegerArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionIntegerArgumentError,e,t))}return l(n,r),n}(d),e.ActionRoleArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionRoleArgumentError,e,t))}return l(n,r),n}(d),e.ActionPositiveIntegerArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionPositiveIntegerArgumentError,e,t))}return l(n,r),n}(d),e.ActionStringOrStringArrayArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionStringOrStringArrayArgumentError,e,t))}return l(n,r),n}(d),e.ActionStringArrayElementError=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,s.default.actionStringArrayElementError,e,t));return n.elementIndex=r,n}return l(i,o),i}(d),e.SetTestSpeedArgumentError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.setTestSpeedArgumentError,e,t))}return l(n,r),n}(d),e.ActionUnsupportedDeviceTypeError=function(r){function n(e,t){return c(this,n),u(this,r.call(this,s.default.actionUnsupportedDeviceTypeError,e,t))}return l(n,r),n}(d),e.ActionSelectorError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.actionSelectorError));return r.selectorName=e,r.errMsg=t,r}return l(o,n),o}(i),e.ActionElementNotFoundError=function(t){function r(e){return c(this,r),u(this,t.call(this,s.default.actionElementNotFoundError,e))}return l(r,t),r}(f),e.ActionElementIsInvisibleError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionElementIsInvisibleError))}return l(t,e),t}(i),e.ActionSelectorMatchesWrongNodeTypeError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}return l(n,r),n}(i),e.ActionAdditionalElementNotFoundError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.actionAdditionalElementNotFoundError,t));return r.argumentName=e,r}return l(o,n),o}(f),e.ActionAdditionalElementIsInvisibleError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}return l(n,r),n}(i),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.actionAdditionalSelectorMatchesWrongNodeTypeError));return r.argumentName=e,r.nodeDescription=t,r}return l(o,n),o}(i),e.ActionElementNonEditableError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionElementNonEditableError))}return l(t,e),t}(i),e.ActionElementNotTextAreaError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionElementNotTextAreaError))}return l(t,e),t}(i),e.ActionElementNonContentEditableError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionElementNonContentEditableError));return t.argumentName=e,t}return l(n,r),n}(i),e.ActionRootContainerNotFoundError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionRootContainerNotFoundError))}return l(t,e),t}(i),e.ActionIncorrectKeysError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionIncorrectKeysError));return t.argumentName=e,t}return l(n,r),n}(i),e.ActionCanNotFindFileToUploadError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.actionCanNotFindFileToUploadError));return t.filePaths=e,t}return l(n,r),n}(i),e.ActionElementIsNotFileInputError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionElementIsNotFileInputError))}return l(t,e),t}(i),e.ActionInvalidScrollTargetError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.actionInvalidScrollTargetError));return r.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",r}return l(o,n),o}(i),e.WindowDimensionsOverflowError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.windowDimensionsOverflowError));return t.callsite=e,t}return l(n,r),n}(i),e.InvalidElementScreenshotDimensionsError=function(i){function a(e,t){c(this,a);var r=u(this,i.call(this,s.default.invalidElementScreenshotDimensionsError)),n=e<=0,o=t<=0;return r.dimensions=n?o?(r.verb="are","width and height"):(r.verb="is","width"):(r.verb="is","height"),r}return l(a,i),a}(i),e.ForbiddenCharactersInScreenshotPathError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.forbiddenCharactersInScreenshotPathError));return r.screenshotPath=e,r.forbiddenCharsList=t,r}return l(o,n),o}(i),e.RoleSwitchInRoleInitializerError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.roleSwitchInRoleInitializerError));return t.callsite=e,t}return l(n,r),n}(i),e.ActionElementNotIframeError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionElementNotIframeError))}return l(t,e),t}(i),e.ActionIframeIsNotLoadedError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.actionIframeIsNotLoadedError))}return l(t,e),t}(i),e.CurrentIframeIsNotLoadedError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.currentIframeIsNotLoadedError))}return l(t,e),t}(i),e.CurrentIframeNotFoundError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.currentIframeNotFoundError))}return l(t,e),t}(i),e.CurrentIframeIsInvisibleError=function(e){function t(){return c(this,t),u(this,e.call(this,s.default.currentIframeIsInvisibleError))}return l(t,e),t}(i),e.NativeDialogNotHandledError=function(n){function o(e,t){c(this,o);var r=u(this,n.call(this,s.default.nativeDialogNotHandledError));return r.dialogType=e,r.pageUrl=t,r}return l(o,n),o}(i),e.UncaughtErrorInNativeDialogHandler=function(o){function i(e,t,r){c(this,i);var n=u(this,o.call(this,s.default.uncaughtErrorInNativeDialogHandler));return n.dialogType=e,n.errMsg=t,n.pageUrl=r,n}return l(i,o),i}(i),e.SetNativeDialogHandlerCodeWrongTypeError=function(r){function n(e){c(this,n);var t=u(this,r.call(this,s.default.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}return l(n,r),n}(i)},"type.js":function(e,t,r){e.__esModule=!0,e.default={uncaughtErrorOnPage:"uncaughtErrorOnPage",uncaughtErrorInTestCode:"uncaughtErrorInTestCode",uncaughtNonErrorObjectInTestCode:"uncaughtNonErrorObjectInTestCode",uncaughtErrorInClientFunctionCode:"uncaughtErrorInClientFunctionCode",uncaughtErrorInCustomDOMPropertyCode:"uncaughtErrorInCustomDOMPropertyCode",unhandledPromiseRejection:"unhandledPromiseRejection",uncaughtException:"uncaughtException",missingAwaitError:"missingAwaitError",actionIntegerOptionError:"actionIntegerOptionError",actionPositiveIntegerOptionError:"actionPositiveIntegerOptionError",actionBooleanOptionError:"actionBooleanOptionError",actionSpeedOptionError:"actionSpeedOptionError",actionOptionsTypeError:"actionOptionsTypeError",actionBooleanArgumentError:"actionBooleanArgumentError",actionStringArgumentError:"actionStringArgumentError",actionNullableStringArgumentError:"actionNullableStringArgumentError",actionStringOrStringArrayArgumentError:"actionStringOrStringArrayArgumentError",actionStringArrayElementError:"actionStringArrayElementError",actionIntegerArgumentError:"actionIntegerArgumentError",actionRoleArgumentError:"actionRoleArgumentError",actionPositiveIntegerArgumentError:"actionPositiveIntegerArgumentError",actionSelectorError:"actionSelectorError",actionElementNotFoundError:"actionElementNotFoundError",actionElementIsInvisibleError:"actionElementIsInvisibleError",actionSelectorMatchesWrongNodeTypeError:"actionSelectorMatchesWrongNodeTypeError",actionAdditionalElementNotFoundError:"actionAdditionalElementNotFoundError",actionAdditionalElementIsInvisibleError:"actionAdditionalElementIsInvisibleError",actionAdditionalSelectorMatchesWrongNodeTypeError:"actionAdditionalSelectorMatchesWrongNodeTypeError",actionElementNonEditableError:"actionElementNonEditableError",actionElementNotTextAreaError:"actionElementNotTextAreaError",actionElementNonContentEditableError:"actionElementNonContentEditableError",actionElementIsNotFileInputError:"actionElementIsNotFileInputError",actionRootContainerNotFoundError:"actionRootContainerNotFoundError",actionIncorrectKeysError:"actionIncorrectKeysError",actionCanNotFindFileToUploadError:"actionCanNotFindFileToUploadError",actionUnsupportedDeviceTypeError:"actionUnsupportedDeviceTypeError",actionIframeIsNotLoadedError:"actionIframeIsNotLoadedError",actionElementNotIframeError:"actionElementNotIframeError",actionInvalidScrollTargetError:"actionInvalidScrollTargetError",currentIframeIsNotLoadedError:"currentIframeIsNotLoadedError",currentIframeNotFoundError:"currentIframeNotFoundError",currentIframeIsInvisibleError:"currentIframeIsInvisibleError",nativeDialogNotHandledError:"nativeDialogNotHandledError",uncaughtErrorInNativeDialogHandler:"uncaughtErrorInNativeDialogHandler",setTestSpeedArgumentError:"setTestSpeedArgumentError",setNativeDialogHandlerCodeWrongTypeError:"setNativeDialogHandlerCodeWrongTypeError",clientFunctionExecutionInterruptionError:"clientFunctionExecutionInterruptionError",domNodeClientFunctionResultError:"domNodeClientFunctionResultError",invalidSelectorResultError:"invalidSelectorResultError",cantObtainInfoForElementSpecifiedBySelectorError:"cantObtainInfoForElementSpecifiedBySelectorError",externalAssertionLibraryError:"externalAssertionLibraryError",pageLoadError:"pageLoadError",windowDimensionsOverflowError:"windowDimensionsOverflowError",forbiddenCharactersInScreenshotPathError:"forbiddenCharactersInScreenshotPathError",invalidElementScreenshotDimensionsError:"invalidElementScreenshotDimensionsError",roleSwitchInRoleInitializerError:"roleSwitchInRoleInitializerError",assertionExecutableArgumentError:"assertionExecutableArgumentError",assertionWithoutMethodCallError:"assertionWithoutMethodCallError",assertionUnawaitedPromiseError:"assertionUnawaitedPromiseError"},t.exports=e.default}}},"test-run":{"browser-console-messages.js":function(e,t,r){e.__esModule=!0;var n,o=r("../utils/assignable");var i=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this));return t.log=[],t.info=[],t.warn=[],t.error=[],t._assignFrom(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype._getAssignableProperties=function(){return[{name:"log"},{name:"info"},{name:"warn"},{name:"error"}]},n.prototype.concat=function(e){this.log=this.log.concat(e.log),this.info=this.info.concat(e.info),this.warn=this.warn.concat(e.warn),this.error=this.error.concat(e.error)},n.prototype.addMessage=function(e,t){this[e].push(t)},n.prototype.getCopy=function(){for(var e={},t=this._getAssignableProperties(),r=0,n=t.length;r<n;r++){var o=t[r];e[o.name]=this[o.name].slice()}return e},n}(((n=o)&&n.__esModule?n:{default:n}).default);e.default=i,t.exports=e.default},"client-messages.js":function(e,t,r){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default},commands:{"options.js":function(e,t,r){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var n,o=r("../../utils/assignable"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./validations/factories"),s=r("../../errors/test-run");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=e.integerOption=(0,a.createIntegerValidator)(s.ActionIntegerOptionError),f=e.positiveIntegerOption=(0,a.createPositiveIntegerValidator)(s.ActionPositiveIntegerOptionError),h=e.booleanOption=(0,a.createBooleanValidator)(s.ActionBooleanOptionError),m=e.speedOption=(0,a.createSpeedValidator)(s.ActionSpeedOptionError),p=e.ActionOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.speed=null,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return[{name:"speed",type:m}]},o}(i.default),g=e.OffsetOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.offsetX=null,r.offsetY=null,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:d},{name:"offsetY",type:d}])},o}(p),E=(e.ScrollOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.scrollToCenter=!1,r.skipParentFrames=!1,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:h},{name:"skipParentFrames",type:h}])},o}(g),e.ElementScreenshotOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.scrollTargetX=null,r.scrollTargetY=null,r.includeMargins=!1,r.includeBorders=!0,r.includePaddings=!0,r.crop={left:null,right:null,top:null,bottom:null},r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:d},{name:"scrollTargetY",type:d},{name:"crop.left",type:d},{name:"crop.right",type:d},{name:"crop.top",type:d},{name:"crop.bottom",type:d},{name:"includeMargins",type:h},{name:"includeBorders",type:h},{name:"includePaddings",type:h}])},o}(p),e.MouseOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:h},{name:"modifiers.alt",type:h},{name:"modifiers.shift",type:h},{name:"modifiers.meta",type:h}])},o}(g)),v=e.ClickOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.caretPos=null,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:f}])},o}(E);e.MoveOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.speed=null,r.minMovingTime=null,r.holdLeftButton=!1,r.skipScrolling=!1,r.skipDefaultDragBehavior=!1,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:h},{name:"skipDefaultDragBehavior",type:h}])},o}(E),e.TypeOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.replace=!1,r.paste=!1,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:h},{name:"paste",type:h}])},o}(v),e.DragToElementOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this,e,t));return r.destinationOffsetX=null,r.destinationOffsetY=null,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return n.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:d},{name:"destinationOffsetY",type:d}])},o}(E),e.ResizeToFitDeviceOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.portraitOrientation=!1,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:h}]},o}(i.default),e.AssertionOptions=function(n){function o(e,t){u(this,o);var r=l(this,n.call(this));return r.timeout=void 0,r.allowUnawaitedPromise=!1,r._assignFrom(e,t),r}return c(o,n),o.prototype._getAssignableProperties=function(){return[{name:"timeout",type:f},{name:"allowUnawaitedPromise",type:h}]},o}(i.default)},"type.js":function(e,t,r){e.__esModule=!0,e.default={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeElementScreenshot:"take-element-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages",executeExpression:"execute-expression"},t.exports=e.default},"utils.js":function(e,t,r){e.__esModule=!0,e.isCommandRejectableByPageError=function(e){return!(n=e,(s(n)||n.type===i.default.wait||n.type===i.default.assertion||n.type===i.default.executeExpression||u(e)||l(e))&&(r=e,r.type!==i.default.resizeWindow&&r.type!==i.default.resizeWindowToFitDevice&&r.type!==i.default.maximizeWindow||(t=e,t.type===i.default.switchToIframe||t.type===i.default.switchToMainWindow)));var t;var r;var n},e.canSetDebuggerBreakpointBeforeCommand=function(e){return e.type!==i.default.debug&&!s(e)&&!l(e)},e.isScreenshotCommand=function(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail},e.isBrowserManipulationCommand=u,e.isServiceCommand=l,e.isExecutableInTopWindowOnly=function(e){return e.type===i.default.testDone||e.type===i.default.switchToMainWindow||e.type===i.default.setNativeDialogHandler||e.type===i.default.getNativeDialogHistory||e.type===i.default.setTestSpeed||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||u(e)&&e.type!==i.default.takeElementScreenshot},e.isJSExpression=function(e){return null!==e&&"object"==typeof e&&e.type===a&&"string"==typeof e.value},e.isExecutableOnClientCommand=function(e){return e.type!==i.default.wait&&e.type!==i.default.setPageLoadTimeout&&e.type!==i.default.debug&&e.type!==i.default.useRole&&e.type!==i.default.assertion&&e.type!==i.default.executeExpression};var n,o=r("./type"),i=(n=o)&&n.__esModule?n:{default:n};var a="js-expr";function s(e){return e.type===i.default.executeClientFunction||e.type===i.default.executeSelector}function u(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail||e.type===i.default.resizeWindow||e.type===i.default.resizeWindowToFitDevice||e.type===i.default.maximizeWindow}function l(e){return e.type===i.default.testDone||e.type===i.default.takeScreenshotOnFail||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||e.type===i.default.takeScreenshotOnFail}},validations:{"factories.js":function(e,t,r){function o(n){return function(e,t){var r=typeof t;if("number"!==r)throw new n(e,r);if(!(!isNaN(t)&&isFinite(t)&&t===Math.floor(t)))throw new n(e,t)}}e.__esModule=!0,e.createIntegerValidator=o,e.createPositiveIntegerValidator=function(r){var n=o(r);return function(e,t){if(n(e,t),t<0)throw new r(e,t)}},e.createBooleanValidator=function(n){return function(e,t){var r=typeof t;if("boolean"!==r)throw new n(e,r)}},e.createSpeedValidator=function(n){return function(e,t){var r=typeof t;if("number"!==r)throw new n(e,r);if(isNaN(t)||t<.01||1<t)throw new n(e,t)}}}}}},utils:{"assignable.js":function(e,t,r){e.__esModule=!0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},e.prototype._assignFrom=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var n=this._getAssignableProperties(),o=0;o<n.length;o++){for(var i=n[o],a=i.name,s=i.type,u=i.required,l=i.init,c=i.defaultValue,d=a.split("."),f=d.length-1,h=d[f],m=e,p=this,g=0;g<f&&m&&p;g++)m=m[d[g]],p=p[d[g]];if(p&&"defaultValue"in n[o]&&(p[a]=c),m&&p){var E=m[h];(void 0!==E||u)&&(t&&s&&s(a,E),p[h]=l?l(a,E,r):E)}}},e}();e.default=n,t.exports=e.default},"limit-number.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return Math.min(Math.max(t,e),r)},t.exports=e.default}}}}})("testcafe-release/src/client/driver/index")}initTestCafeClientDrivers(window)}();